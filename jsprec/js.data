a:29:{s:6:"detail";s:5833:"var nav_single=true,movsize=200,o_m=$("#m1"),o_lslc=$(".l_slc");cp_pos={my:"left top",at:"right top",of:o_m,offset:"8, -4",collision:"fit none"};window.onscroll=pos_lpane;$(function(){_movstart();pos_lpane();$(".moviebox, #conpane").hover(function(){_showconpane(1)},function(){_showconpane(0)}).mousemove(function(e){_showconpane(1)});$(".slc").hover(function(){_slchov(this)},function(){_slchovr()});o_lslc.mouseover(function(){$(this).stop().hide()})});
function _showconpane(f){if(G.movhidden||G.cphidden)return;var c=$("#conpane");if(f==1){clearTimeout(T.cp_hide);c.stop(1,1).position(cp_pos).fadeIn("medium").css("opacity",1)}else if(f==0){clearTimeout(T.cp_hide);c.stop(1,1).fadeTo("fast",0.7);T.cp_hide=setTimeout(function(){c.stop(1,1).fadeOut("fast")},700)}else{G.cphidden=1;c.stop(1,1).fadeOut("fast");setTimeout("G.cphidden = 0;",1E3)}}
function _hidemov(f){if(f){_play();_movsz(200);$(".msize").prop("disabled",false);$("#conpane, .moviebox, .playbtn, .pausebtn").stop(1,1).hide("medium");$("#nomovie").show("slow");$(".movoffbtn, #downcbtn, #upcbtn").hide("fast");G.movhidden=1;$("#navipanel").css("top",0);G.lkbup=0}else{$("#conpane, .moviebox, .playbtn").stop(1,1).show("medium");$("#nomovie, .pausebtn").hide("fast");$(".movoffbtn, #upcbtn").show("fast");G.movhidden=0}}var olp=$("#left_pane");
function pos_lpane(){var mint=_bottom("#namebar");var pos1=$(document).scrollTop()+10;if(IE6)olp.css("top",pos1<mint?mint:pos1);else{var p=olp.css("position");if(p=="fixed"&&pos1<mint)olp.css({position:"absolute",top:mint});else if(p=="absolute"&&pos1>mint)olp.css({position:"fixed",top:0})}_showconpane(-1)}
function _navi(s){if(nav_single){$(".dtable:visible:not(#t_"+s+")").slideUp("fast");$("#t_"+s+":hidden").slideDown("medium");$("#showallbtn").show("slow");pos_lpane();if(IE6)$("#left_pane").css("top",_bottom("#namebar"))}$("#t_"+s).queue(function(){$("html, body").animate({scrollTop:$(this).offset().top},"medium");$(this).dequeue()})}
function tbtoggle(){nav_single=!nav_single;a=$("#sign_a").css("background-color");$("#sign_a").css("background-color",$("#sign_s").css("background-color"));$("#sign_s").css("background-color",a);if(nav_single){_navi("Entry");$("#showallbtn").show("slow")}else{$(".dtable").show("medium");$("#showallbtn").hide("slow");pos_lpane();if(IE6)$("#left_pane").css("top",_bottom("#namebar"))}}
function upc(){var o=$("#navipanel");if(G.lkbup){o.animate({top:0},"fast",function(){$("#downcbtn").hide();$("#upcbtn").show()});G.lkbup=0}else{o.animate({top:-200},"fast",function(){$("#downcbtn").show();$("#upcbtn").hide()});G.lkbup=1}}$(function(){$(".moviebox").resizable({minHeight:200,minWidth:200,distance:7,aspectRatio:true,start:function(event,ui){$("#conpane").hide();G.cphidden=1},stop:function(event,ui){_movsz(ui.size.width,1);G.cphidden=0}})});
function _mch(num,f){movnum=num;o_m._movset(mv_files[movnum][movres]);$(".midx").removeClass("midxc");$(".midx"+num).addClass("midxc");_mvmsg("mov",num)}
function _movsz(s,flg){if(G.movhidden)_hidemov(0);var ss=s+"px";o_m.css({height:s,width:s}).jPlayer({size:{height:ss,width:ss}});$(".mvmsgbox").css({width:s});$(".moviebox").css({height:"auto",width:"auto"});$("#conpane").hide();G.cphidden=1;$("#conpane:visible").hide();$("#right_pane").animate({marginLeft:s+20},"fast",function(){G.cphidden=0});movres=s<300?"s":"l";_mch(movnum);$(".msize").prop("disabled",false);$(".ms"+s).prop("disabled",true)}
function _etimg(i){pausing=1;_mch(etimg.depnum);_mvmsg("comp"," #"+i);if(etimg.div!=""){$(".moviebox").prepend(etimg.div);etimg.div=""}var s=o_m.width();$("#etimgb").show().css({width:s,height:s}).html(etimg.html.replace(/_eid_/g,i));$("#etimg1").fadeIn(250).delay(500).fadeOut(250).fadeIn(250).delay(500).fadeOut(250);$("#etimg2").delay(250).fadeIn(250).fadeOut(250).delay(500).fadeIn(250).fadeOut(250,function(){_play(1);$("#etimgb").hide()})}
function _slchov(o){if(G.pssizing)return;var i=$(o).attr("id"),ang=i.substr(4,1),lev=i.substr(5,1),oi,msg,c_ang,c_lev,l,t,w,h,iwid,ihei,iof,ar1=["z","y","x"],ar2=["a","b","c","_","s"];o_lslc.stop(1,1).fadeOut(0.5);for(var i1 in ar1)for(var i2 in ar2){c_ang=ar1[i1];c_lev=ar2[i2];if(c_ang==ang)continue;oi=$("#slc_"+c_ang+c_lev);if(oi.length===0||!oi.is(":visible"))continue;var iwid=oi.width(),ihei=oi.height(),iof=oi.offset();var ani1=ang=="z"||ang=="y"&&c_ang=="z"?{opacity:1,top:iof.top+Math.round(ihei*
lv2r[0][c_ang][lev])+1,left:iof.left+2,width:iwid-2,height:0}:{opacity:1,top:iof.top+2,left:iof.left+Math.round(iwid*lv2r[1][c_ang][lev])+1,width:0,height:ihei-2},ani2={top:iof.top+2,left:iof.left+2,width:iwid-2,height:ihei-2};if(lev=="s"||lev=="_")$("#l_slc_"+c_ang+c_lev).stop(1,1).animate(ani1,10).animate(ani2,800).animate(ani1,10).fadeTo(2E3,0.6);else $("#l_slc_"+c_ang+c_lev).stop(1,1).show().animate(ani1,"fast").fadeTo(2E3,0.6)}}
function _slchovr(s){o_lslc.stop(1,1).fadeOut(s==undefined?2E3:s)}
function _pssize(size,obj){G.pssizing=1;o_lslc.hide();_slchovr(100);$("#pstable td img").each(function(){var o=$(this),w=o.width,h=o.height,src=o.attr("src"),sizeto=w>h?{width:"auto",height:size}:{width:size,height:"auto"},src=size==100?src.replace("png","jpg"):src.replace("jpg","png");o.animate(sizeto,"slow",function(){G.pssizing=0}).attr("src",src)});$(".pssize").prop("disabled",false);$(obj).prop("disabled",true);$("#t_Map").css({position:"relative",zIndex:size>100?200:0});if(size>100)$("#pstable tr th .xbtn").show("medium");
else{$("#pstable tr th .xbtn").hide("medium").attr("onclick","_hidepsrow(this)").text("X");$("#pstable td").show("medium")}}function _hidepsrow(o,flg){var o=$(o),p=o.parent("th");if(flg==undefined){o.attr("onclick","_hidepsrow( this, 1 )").text(" + ");p.children("p").hide("medium");p.nextAll("td").hide("medium")}else{o.attr("onclick","_hidepsrow( this )").text("X");p.children("p").show("medium");p.nextAll("td").show("medium")}};
";s:4:"diag";s:6135:"var zmax=1E4,shown={},mousex,mousey,mmapsize=150,cont={},o_w=$(window),o_pf=$("#pframe"),o_idbox=$("#idbox"),stshown={backgroundColor:"white",padding:3},sthidden={backgroundColor:"transparent",padding:0},anishown={height:104,width:300},kw;
$(function(){kw=encodeURI($("#kwbox").val());$("#zslider").slider({min:20,max:80,value:Math.sqrt(size),orientation:"vertical",start:function(event,ui){var cx=o_w.width()/2,cy=o_w.height()/2,r=size/8E3,sx=r*cx,sy=r*cy;$("#zfx").css(_lt(cx-10,cy)).fadeIn("fast");$("#zfy").css(_lt(cx,cy-10)).fadeIn("fast");$("#zframe, #zfc").stop(0,0).css(_ltwh(cx-sx,cy-sy,sx*2,sy*2)).fadeIn("fast")},slide:function(event,ui){var cx=o_w.width()/2,cy=o_w.height()/2,r=Math.pow(ui.value,2)/8E3,sx=r*cx,sy=r*cy;$("#zframe").css(_ltwh(cx-
sx,cy-sy,sx*2,sy*2))},stop:function(event,ui){var s=Math.pow(ui.value,2);if(s!=size)_size(s);else $("#zframe, #zfx, #zfy, #zfc").fadeOut("medium")}});o_pf.draggable({cursor:"move",drag:function(){_mmapbox()}}).mousemove(function(e){mousex=e.pageX;mousey=e.pageY}).dblclick(function(){var p=$(this).position(),cx=o_w.width()/2,cy=o_w.height()/2,x=cx-mousex+p.left,y=cy-mousey+p.top;$("#zfx").css(_lt(cx-10,cy));$("#zfy").css(_lt(cx,cy-10));$(this).animate(_lt(x,y),"medium");$("#zfx, #zfy").fadeIn("fast").fadeOut("slow");
_mmapbox(x,y)});$("#kwbox").change(function(){_kw()});$("#mmapbox").draggable({cursor:"move",drag:function(){_mmapmove()}});_fboxpos();$("#mmap").fadeIn("slow");_mmapbox();o_w.bind("resize",_mmapbox);if(initid!=""){_focus(initid);initid=""}_sethov()});
function _hidetop(f){if(f)$("#topbar, #toptab, #placebar, #ti_div").slideUp("fast",function(){$("#hidetop").hide();$("#showtop").show();_fboxpos()});else $("#topbar, #toptab, #placebar, #ti_div").slideDown("fast",function(){$("#hidetop").show();$("#showtop").hide();_fboxpos()})}function _fboxpos(){$("#fbox").css("top",$("#top").height())}
function _idchange(){var id=o_idbox.val();if(/^[0-9][0-9a-z]{3}$/.test(id))if($("#"+id).length){o_idbox.css("background-color","#c0c0ff");_focus(id)}else o_idbox.css("background-color","#ffc0c0");else o_idbox.css("background-color","white")}function _showkwadd(){$("#kwbox").attr("size",30);$("#kwadd").show("fast")}function _hidekwadd(){$("#kwbox").attr("size",20);$("#kwadd, #searching, #nohit ").hide("fast")}
function p(id,f){if(G.hiding==id)return;$("#hideallbtn").show("fast");var o=$("#"+id);if(cont[id]==undefined)$.get("ajax_id2img.php?m=o&id="+id,null,function(data){o.html(data);cont[id]=data});$("#"+id).css(stshown).animate(anishown,f?0:"fast")._ztop().html(cont[id]==undefined?"loading":cont[id]);shown[id]=true}
function _c(id){if(typeof id=="object")id=$(id).parent().attr("id");G.hiding=id;$("#"+id).stop(true,true).html(" ").css(sthidden).animate(anihidden,"fast");delete shown[id];setTimeout("G.hiding=0",300)}function _o(o){p($(o).attr("id"))}function _hideall(){$(".e, .p, .h").html(" ").css(anihidden).css(sthidden);shown={};$("#hideallbtn").hide("fast")}
function _size(v){var p=o_pf.position(),cx=o_w.width()/2,cy=o_w.height()/2,relx=(cx-p.left)/size,rely=(cy-p.top)/size;size=v>100?v:size*v;_getplot();o_pf.hide().css(_lt(cx-size*relx,cy-size*rely))}
function _kw(o){_tour(1);if(o!=undefined){kw=$(o).children(":selected").text();$("#kwbox").val(kw)}else kw=$("#kwbox").val();if(kw==""){_clearres();return}$("#numhit, #nohit").hide();$("#searching").show("medium");$(".e, .p").addClass("h").css("z-index",10);$.getJSON("?kw="+encodeURI(kw),function(json){G.resids=json.ids;delete G.tourids;for(var i in json.ids)$("#"+json.ids[i]).removeClass("h").css("z-index",100);if(json.num!=0){$("#numhit").show("medium").children("span").text(json.num);_hidekwadd()}else{$("#numhit, #searching").hide();
$("#nohit").show("medium")}})}function _tour(f){if(f){$("#starttourbtn, #shownextbtn").show();$("#stoptourbtn").hide();clearInterval(T.tour)}else{$("#starttourbtn, #shownextbtn").hide();$("#stoptourbtn").show();_shownext();T.tour=setInterval(function(){_shownext()},3E3)}}
function _shownext(){if(G.tourids==undefined)G.tourids=G.resids.concat();var id="";while($("#"+id).length==0){if(G.tourids.length==0){delete G.tourids;_tour(1);return}id=G.tourids.shift()}_focus(id);o_idbox.val(id);setTimeout('_c("'+id+'")',4E4)}function _clearres(){_tour(1);delete resids;$(".h").removeClass("h");$("#numhit, #nohit").hide("fast");$("#kwbox").val("")}
function _getplot(x,y){$("#dark").fadeTo("fast",0.2);kw=encodeURI($("#kwbox").val());o_pf.load("omokagemap.php?aj=1"+"&size="+size+"&kw="+kw+"&mode="+mode,"",function(){_sethov();o_pf.width(size+40).height(size+40).show();for(var id in shown)p(id,2);var c=$("#zframe");var cp=c.position();$("#zfc:visible").animate(_ltwh(cp.left,cp.top,c.width(),c.height()),"slow","",function(){$("#zframe, #zfx, #zfy, #zfc").fadeOut("fast");$("#dark").fadeOut("fast")});if(initid!=""){_focus(initid);initid=""}_mmapbox()})}
function _chmod(m){mode=m;$("#form button").prop("disabled",false);$("#mode"+m).prop("disabled",true);_getplot()}function _sethov(){$(".e, .p, .h").mouseenter(function(){$(this)._ztop()})}function _focus(id){var pt=$("#"+id).position(),cx=o_w.width()/2-pt.left-150,cy=o_w.height()/2-pt.top-50;o_pf.animate(_lt(cx,cy),"medium","",function(){p(id,1)});_mmapbox(cx,cy)}
function _mmapsize(){mmapsize={0:150,150:250,250:0}[mmapsize];var h=mmapsize;if(mmapsize==0){$("#mmapbox").hide();h=80}$("#mmapbtn").stop(1,1).show().animate({height:h},"medium");$("#mmapimg").stop(1,1).show().animate({width:mmapsize,height:mmapsize},"medium");_mmapbox()}
function _mmapbox(pl,pt){if(mmapsize==0)return;if(pt==undefined)var pt=o_pf.position().top;if(pl==undefined)var pl=o_pf.position().left;var s=size/mmapsize,mpos=$("#mmapimg").position();$("#mmapbox").show().stop(1,1).animate(_ltwh(mpos.left-pl/s,mpos.top-pt/s,o_w.width()/s,o_w.height()/s),"fast")}function _mmapmove(){var s=size/mmapsize,mb=$("#mmapbox").position(),mi=$("#mmapimg").position();o_pf.stop(1,1).animate(_lt((mi.left-mb.left)*s,(mi.top-mb.top)*s),"fast")}
jQuery.fn.extend({_ztop:function(){zmax++;return this.css("z-index",zmax)}});function _lt(l,t){return{left:l,top:t}}function _ltwh(l,t,w,h){return{left:l,top:t,width:w,height:h}};
";s:3:"doc";s:334:"window.onscroll=function(){var pos1=$(document).scrollTop()+10,mint=_bottom("#placebar");if(pos1<mint)$("#navi_pane").css({position:"absolute",top:mint});else if(IE6)$("#navi_pane").css({top:pos1});else $("#navi_pane").css({position:"fixed",top:5})};function _scr(p){$("html, body").animate({scrollTop:$("#p_"+p).offset().top},300)};
";s:3:"emn";s:1091:"var dt=new Date;dt.setDate(dt.getDate()+10);var ckdate=dt.toGMTString(),ttip_param={track:false,left:0,delay:150,showURL:false,showBody:" : "},T={},G={},IE=false,IE6=false;if(false){if(navigator.userAgent.match(/MSIE (\u00a5d\u00a5.\u00a5d+)/))IE=true;if(parseFloat(RegExp.$1)==6)IE6=true}function _cookie(k,v){document.cookie=k+"="+escape(v)+";"+"expires="+ckdate+";"}function _bottom(s){var o=$(s);return o.position().top+o.outerHeight()}
function _tinput(){var str=$("#ti_box").val().toLowerCase(),l=str.length;if(l==0){$("#ti_box").attr("size",5);$("#ti_btn").stop(true,true).fadeOut("medium")}else{$("#ti_box").attr("size",l+4);$("#ti_btn").stop(true,true).fadeIn("medium")}if(str.match(/^[0-9][0-9a-zA-Z]{3}$/)){$("#ti_btn").val("ID");$("#ti_form").attr("action","emnavi_detail.php");$("#ti_idimg").stop(true,true).fadeIn("medium").load("ajax_id2img.php?id="+str)}else{$("#ti_btn").val($("#ti_btn").attr("k"));$("#ti_form").attr("action",
"emnavi_result.php");$("#ti_idimg").stop(true,true).fadeOut("medium").html("")}}function _ti_idhide(){$("#ti_idimg").slideUp("medium").html("")};
";s:7:"esearch";s:1616:"var $resbox=$("#oc_div_result"),$idbox=$("#idbox");$(function(){_form.init();if(history&&history.pushState)$(window).on("popstate",function(e){_form.reloadform()})});
var _form={formcont:null,timer_w:null,$form:$("#form1"),$actab:$("#actab"),$ckb_met:$(".ckb_met"),$tsort:$("#tsort"),$trev:$("#trev"),$pagen:$("#pagen"),$menu_sortby:$("#sortby"),$rb_mode_table:$("#rb_mode_table"),init:function(){this.formcont=this.srlz();this.$form.change(function(){_form.changed()})},srlz:function(){return this.$form.serialize()},allmet:function(){var o=this.$ckb_met;o.prop("checked",o.filter(":checked").length<o.length)},pagenum:function(n){this.$pagen.val(n);_startsearch()},reloadform:function(){var l=
location.search||"?";this.$form._loadex({u:l+"&ajax=f",speed:0,func:function(){_form.init()}});_startsearch(l+"&ajax=l")},tab:function(num){this.$actab.val(num)},tsort:function(s,r){this.$tsort.val(s);this.$trev.val(r);this.$pagen.val(0);_startsearch()},changed:function(){var f=this.srlz();if(this.formcont==f)return;this.formcont=f;if(this.$rb_mode_table.is(":checked"))this.$menu_sortby.prop("disabled",true);else this.$menu_sortby.prop("disabled",false);$resbox.fadeTo("fast",0.7);this.$pagen.val(0);
_timer.do_after_busy(function(){_startsearch()},1E3,"form")}};function _startsearch(prms){var srlz=prms||_form.srlz();if(history&&history.pushState)prms==undefined&&history.pushState(srlz,null,"?"+srlz);$resbox._loadex({u:"?ajax=l",v:srlz,speed:"medium"}).fadeTo("fast",1);$("#idhit")._loadex({u:"?ajax=h",v:{kw:$idbox.val()},speed:"fast"})}function _ym_search(){$("#form1").attr("action","ysearch.php").submit()};
";s:7:"gallery";s:1451:"$(function(){$(".tt").tooltip(ttip_param)});var loaded={},postv={e:2,p:"a",s:"s"},isize=75;function _toggle(s){_get(s);$("#a_"+s).stop(true,true).slideToggle("normal")}function _alone(s){_get(s);$(".imgarea:not(#a_"+s+")").stop(true,true).slideUp("medium",function(){$("#a_"+s).stop(true,true).slideDown("medium")})}function _reload(s){_get(s);$("#a_"+s).stop(true,true).slideUp("fast").slideDown("fast")}
function _all(){if($(".imgarea:visible").length==cates.length)$(".imgarea").stop(true,true).hide();else{$(".imgarea").stop(true,true).show();for(var i in cates)_get(cates[i])}}function _get(s){if(loaded[s])return;$("#r_"+s).hide("fast");$("#w_"+s).slideDown("fast");if(G.loading)setTimeout('_get("'+s+'");',500);else _getmain(s)}
function _getmain(s){G.loading=1;$("#a_"+s).load("?cate="+s,postv,function(){$(this).children("a").tooltip(ttip_param);$("#w_"+s).slideUp("slow");$(".imgarea img").height(isize).width(isize);$(this).fadeTo("medium",1);loaded[s]=1;G.loading=0})}function _emode(o){postv["e"]=o.value;_relbtn()}function _pmode(o){postv["p"]=o.value;_relbtn()}function _size(o){postv["s"]=o.value;isize={"vs":50,"s":75,"m":100,"l":200}[o.value];$(".imgarea img").height(isize).width(isize);_relbtn()}
function _relbtn(){loaded={};$(".imgarea:hidden").html("");$(".imgarea:visible").fadeTo("medium",0.6);for(var i in cates)if($("#a_"+cates[i]).is(":visible"))$("#r_"+cates[i]).show("fast");$(".tglbtn").fadeOut("fast").fadeIn("fast")};
";s:5:"index";s:1013:"var movsize=200;$(function(){_movstart()});function idchange(){var id=$("#idbox").val().toLowerCase();if(id.match(/^[0-9][0-9a-z]{3}$/)){$("#idform").attr("action","emnavi_detail.php");$("#idimg").slideDown("slow").load("ajax_id2img.php?m=i&id="+id)}else{$("#idform").attr("action","emnavi_result.php");if(id.length<2)$("#idimg").slideUp("slow").html("")}}
function _resh(){$.getJSON("ajax_slots.php?t="+Date(),function(r){o_mv.each(function(i){$(this)._movset(r[i].url);var c=$("#cap"+i);c.html(c.html().replace(/(EM|P)DB-[0-9a-z]{4}/ig,r[i].db+"-"+r[i].id));_mvmsg("loading");_mvicon("resh")});$("#cap0 a, #cap1 a, #cap2 a").tooltip(ttip_param)})}function viewbtn(){$("#ctrdt").toggle("middle")}
function _accdet(f){if(f){$("#btn_accs").show();$("#btn_accd").hide();$(".acc_detail").fadeIn("slow");$(".acc_simple").fadeOut("slow");_cookie("top_acc_det",1)}else{$("#btn_accs").hide();$("#btn_accd").show();$(".acc_detail").fadeOut("slow");$(".acc_simple:not(#idimg)").fadeIn("slow");_cookie("top_acc_det","")}};
";s:5:"mlist";s:896:"var o_m=$("#m1"),o_ani=$("#aniimg"),o_table=$("#movinfo");$(function(){_movstart()});function _page(p){var w=$("#wait").slideDown("fast"),o=$("#mlist").fadeTo("fast",0.5);$(".pgbtn").prop("disabled",true);$.getJSON("?page="+p,function(r){o.html(r.imgs).fadeTo("fast",1).children("img").tooltip(ttip_param);$(".dbar").html(r.dbar);w.slideUp("slow")})}
function _movc(s){if(s==G.prevmid)return;if(G.prevmid!=undefined)$("#i"+G.prevmid).addClass("idimg").removeClass("cimg");G.prevmid=s;var o=$("#i"+s).addClass("cimg").removeClass("idimg");o_ani.stop(1,1).css({top:o.offset().top,left:o.offset().left,width:o.width(),height:o.height()}).attr("src",o.attr("src")).show().animate({left:o_m.offset().left,top:o_m.offset().top,width:o_m.width(),height:o_m.height()},500).fadeOut("normal");$.getJSON("?mov="+s,function(json){o_table.html(json.table);o_m._movset(json.files["s"]);
_mvmsg(json.movid)})};
";s:10:"movie-func";s:2978:"var o_mv,o_mvicon,o_mvmsg,pausing=1,prevm={},msldcol={def:"#aaa",act:"#e77"};jQuery.fn.extend({_movset:function(obj){return $(this).jPlayer("setMedia",obj).jPlayer(pausing?"pause":"play")}});if(movsize==undefined)var movsize=mv_param.size;var movres=movsize<300?"s":"l";$(function(){for(var i in mv_param.boxids)_jp_init(mv_param.boxids[i])});
function _jp_init(boxid){var mpx=movsize+"px";$("#"+boxid).jPlayer({cssSelectorAncestor:"#a_"+boxid,preload:"auto",backgroundColor:"#ffffff",loop:true,supplied:"webmv, m4v",size:{width:mpx,height:mpx},click:function(){_play(pausing)},solution:mv_param.flash?"flash, html":"html, flash",ready:function(){$(this)._movset(mv_param[$(this).attr("id")][movres])}})}
function _movstart(){o_mv=$(".player:visible");o_mvicon=$(".mvicon");o_mvmsg=$(".mvmsg");$(".moviebox").hover(function(){_mvmsg(pausing?"mouse":"playing");prevm={x:0,y:0};G.movgeo=undefined},function(){prevm={x:0,y:0};G.movgeo=undefined}).mousemove(function(e){if(!pausing)return;if(G.mousetimer)return;G.mousetimer=1;setTimeout("G.mousetimer=0",100);if(G.movgeo==undefined){var t=$(this);G.movgeo={w:t.width(),l:t.offset().left+3,t:t.offset().top+3}}var x=(e.pageX-G.movgeo.l)/G.movgeo.w-0.5,y=(e.pageY-
G.movgeo.t)/G.movgeo.w-0.5,dx=Math.abs(prevm.x-x),dy=Math.abs(prevm.y-y);if(y>0.5||dx+dy<0.005)return;if(y<-0.4){orient((x+0.5)*7+15.5);_mvicon(x<-0.2?"or_c3":x>0.2?"or_c1":"or_c2")}else if(dx>dy){if(x>0){var p="or_l";orient(x*9.5)}else{var p="or_r";orient(7+x*9.5)}var a=Math.abs(x);_mvicon(a>0.4?"or_bk":a>0.3?p+"3":a>0.15?p+"2":a>0.05?p+"1":"or_f")}else{if(y>0){var p="or_t";orient(y*9.5+7.2)}else{var p="or_b";orient(15+y*9.5)}var a=Math.abs(y);_mvicon(a>0.4?"or_bk":a>0.3?p+"3":a>0.15?p+"2":a>0.05?
p+"1":"or_f")}prevm={x:x,y:y}});$(".jp-seek-bar").mousedown(function(e){var o=$(this);o.children(".jp-play-bar").css("background-color",msldcol.act);T.msld=0;G.msldflg=1;G.msld={l:o.offset().left+2,w:o.width()/100};o_mv.jPlayer("playHead",(e.pageX-G.msld.l)/G.msld.w)}).mousemove(function(e){if(!G.msldflg)return;if(T.msld)return;T.msld=1;setTimeout("T.msld=0",100);var t=$(this);o_mv.jPlayer("playHead",(e.pageX-G.msld.l)/G.msld.w)});$("body").mouseup(function(){if(G.msldflg){G.msldflg=0;$(".jp-play-bar").css("background-color",
msldcol.def)}})}function _movcon(c,o){if(G.movhidden)return;o_mv.jPlayer(c,o)}function _mvicon(f){o_mvicon.stop(1,1).show().attr("src","img/"+f+".gif").fadeOut(4E3)}function _mvmsg(s,s2){if(G.primvmsg)return;o_mvmsg.stop(true,true).hide().text((phpvar.mv_str[s]||s)+(s2!=undefined?s2:"")).show().fadeOut(2E3)}
function _play(f){if(f){o_mv.jPlayer("play");$(".playbtn").hide();$(".pausebtn").show();pausing=0;_mvicon("play");_mvmsg("play")}else{o_mv.jPlayer("pause");$(".playbtn").show();$(".pausebtn").hide();pausing=1;_mvicon("pause");_mvmsg("pause")}}function orient(t){if(!pausing)_play();_movcon("pause",t)}function orient2(s){orient({top:9.6,bottom:13.2,left:1.8,right:5.4,front:0,back:3.6,cut:18.5}[s]);_mvicon(s);_mvmsg(s)};
";s:5:"movie";s:2066:"var MovNum=50,cid="",opmov=[],respar={minHeight:200,minWidth:200,distance:7,aspectRatio:true,stop:function(event,ui){_movsz(ui.size.width)}};$(function(){_movstart()});window.onscroll=function(){var pos1=$(document).scrollTop()+10,mint=_bottom("#namebar");if(pos1<mint)$("#mcontrol").css({position:"absolute",top:mint});else if(IE6)$("#mcontrol").css("top",pos1);else $("#mcontrol").css({position:"fixed",top:5})};
function _idc(id){if(id==undefined)id=$("#idbox").val();else $("#idbox").val(id);if(cid==id)return;cid=id;$(".selid").prop("disabled",false);if(id!="")$(".selid"+id).prop("disabled",true);if(id.match(/^[0-9a-zA-Z]{4}$/))$("#idimg").fadeTo("fast",0.1).slideDown("medium").load("?mode=idc&id="+id,"",function(){$(".adm").tooltip(ttip_param);if(dataid==id)$(".adm").prop("disabled",true);for(var i in opmov)$("#adm"+opmov[i]).prop("disabled",true);$(this).fadeTo("fast",1);$("#idimgm1").hide("medium");$("#idimgm2").show("medium")});
else if(id.length<2){$("#idimg").hide("slow").html("");$("#idimgm1").show("medium");$("#idimgm2").hide("medium")}}
function _adm(id,num,o){var u="?mode=adm&id="+id+"&num="+num+"&cnt="+MovNum+"&siz="+movsize;$.getJSON(u,function(json){$(".movietable:last").after(json.mov);$("#iconarea .icon:last").after(json.icon);mv_param["m"+MovNum]=json.files;_jp_init("m"+MovNum);_movstart();MovNum++;$("#iconarea .addtt").tooltip(ttip_param).removeClass("addtt");$(".moviebox").resizable(respar)});opmov.push(id.slice(-4)+"_"+num);$(o).prop("disabled",true)}function stop(){_movcon("stop")}
function _movsz(s){movsize=s;var ss=s+"px";$(".player").css({height:s,width:s}).jPlayer({size:{height:ss,width:ss}});$(".mvmsgbox").css({width:s});$(".moviebox").css({height:"auto",width:"auto"});$(".movietable").width(s+10);$(".msize").prop("disabled",false);$(".ms"+s).prop("disabled",true)}$(function(){$(".moviebox").resizable(respar)});function hidem(n){$("#t"+n).hide("fast",function(){_movstart()});$("#i"+n).show("normal")}
function showm(n){$("#t"+n).width(movsize+10).show("fast",function(){_movstart()});$("#i"+n).hide("slow")};
";s:4:"omos";s:2821:"var $subjbox=$("#subj_box"),$sicon=$(".sampleicon");phpvar.idservadr="omo-ajax.php?ent=1&id=";$(function(){if(phpvar.id){_result.start();_getsubj()}});
var _result={$box:$("#result_box"),$test:$("#test_box"),timer:null,start:function(){this.timer=setInterval(function(){this.get()}.bind(this),1E3);this.get()},get:function(){phpvar.postvar.t=(new Date).getTime();$.getJSON(phpvar.ajaxurl,phpvar.postvar,function(json){if(json.end){_pop.hide();clearInterval(this.timer)}this.$box.html(json.out);this.$test.append(json.test).show()}.bind(this)).error(function(jqXHR,textStatus,errorThrown){this.$test.show().html("<b>Error:</b> "+textStatus+"<br>"+"<b>Text:</b><br>"+
jqXHR.responseText);clearInterval(this.timer)}.bind(this));if(phpvar.userdata)_getsubj()},get_anim:function(){_pop.hide();_kw_suggest.flg_done=false;this.$box.html(phpvar.loading);phpvar.postvar.t=(new Date).getTime();$.getJSON(phpvar.ajaxurl,phpvar.postvar,function(json){this.$box.hide().html(json.out).slideDown("medium");this.$test.html(json.test).show()}.bind(this))},page:function(p){phpvar.postvar.pg=p;this.get_anim()},mode:function(v){phpvar.postvar.list=v;phpvar.postvar.actab="display";this.get_anim()},
gmref:function(num){phpvar.postvar.gmref=true;phpvar.postvar.gmnum=num;this.timer=setInterval(function(){this.get()}.bind(this),2E3)}};function _getsubj(){$subjbox.load(phpvar.ajaxurl,{"id":phpvar.id,"subj":true})}function _hide(){_hdiv.oc("about",0);_hdiv.oc("query",0)}function _sample(i,o){$sicon.fadeTo(0,1);$(o).fadeTo(0,0.5);_idbox.set(i)}
var _kw_suggest={flg_done:false,$box:null,get:function(id){if(this.flg_done)return;$("#kw_recom")._loadex({u:phpvar.ajaxurl,v:{"id":phpvar.id,"kw_recom":true}});this.flg_done=true},add:function(domobj){var txt_box,txt_btn,$btn=$(domobj);if(!this.$box)this.$box=$("#inp_filtkw");txt_box=this.$box.val();txt_btn=$btn.text();if(txt_box.indexOf(txt_btn)===-1){$btn.addClass("shine");this.$box.val(txt_box+(txt_box==""?"":" ")+txt_btn)}else{$btn.removeClass("shine");this.$box.val(txt_box.replace(txt_btn,"").replace(/ +/,
" ").trim())}}};
var _dbid={vals:{},$box_inc:"",$box_exc:"",getitems:function(id){var $div=$("#func_items");$div.text()||$div._loadex({u:phpvar.ajaxurl,v:{"id":id,"dbid":true}})},filt:function(key,obj){_pop.hide(2);var num=$(obj).val();console.log(key,num);$trg=$(".poptrg_act");this.$box_inc=this.$box_inc||$("#inp_dbid_inc");this.$box_exc=this.$box_exc||$("#inp_dbid_exc");if(num==1){$trg.addClass("filt_inc");this.$box_inc.val(this.$box_inc.val()+" "+key)}else{$trg.removeClass("filt_inc");this.$box_inc.val(this.$box_inc.val().replace(key,"").replace(/ +/,
" ").trim())}if(num==2){$trg.addClass("filt_exc");this.$box_exc.val(this.$box_exc.val()+" "+key)}else{$trg.removeClass("filt_exc");this.$box_exc.val(this.$box_exc.val().replace(key,"").replace(/ +/," ").trim())}}};
";s:10:"pop_common";s:1847:"var w_o=window.opener;
_popvw={wo:window.opener,ready:false,$prgbar:$("#loadingbar"),$msgbox:$("#pmsgbox"),$msg:$("#pmsg"),set_ready:function(){this.ready=true;this.$prgbar.hide("medium");this.cmdhist("Ready","blue")},cmdhist:function(str,col){w_o&&w_o._vw.cmdhist(window.name,str,col);this.$msg.append("<p></p>");this.$msg.children("p:last").text(str).addClass(col).delay(5E3).slideUp("meidum",function(){$(this).remove()})},que_exe:function(que){que.forEach(function(qobj){if(_cmd[qobj.cmd]){_cmd[qobj.cmd](qobj.param,qobj.trg_obj);
return}if(!_cmd.other(qobj.cmd))_popvw.cmdhist(window.getId+": No such command: "+qobj.cmd)})}};if(phpvar.app!="mov")$(window).on({resize:function(){_tab.shrink();_gmenu.resize();if(screen.availWidth-window.outerWidth<20&&screen.availHeight-window.outerHeight<20)return;w_o&&w_o._vw.winsized([$(window).innerWidth(),$(window).innerHeight()])},beforeunload:function(e){w_o&&w_o._vw.closed(window.name)}});
var _gmenu={blank:true,$bar:$("#ttbar"),$menu:$("#gmenu"),show:function(){this.$menu.stop(1,1).slideDown("fast");this.$bar.stop(1,1).slideUp("fast");if(this.blank){this.blank=false;this.$menu.show().load("?ajax=gmenu",phpvar.postv,function(){_tab.refresh();if(typeof _gmenu_init=="function")_gmenu_init()})}},hide:function(){this.$menu.stop(1,1).slideUp("slow");this.$bar.stop(1,1).slideDown("fast")},reset:function(f){this.blank=true;f?this.show():this.hide()},resize:function(){var w=$(window).width(),
h=$(window).height();if(h<w&&1E3<w){this.$menu.addClass("gmenu_r");_popvw.$msgbox.css("width","50%")}else{this.$menu.removeClass("gmenu_r");_popvw.$msgbox.css("width","100%")}}};function _ofunc(func,v1,v2,v3,v4){if($.isFunction(w_o[func]))return w_o[func](v1,v2,v3,v4);else if($.isFunction(w_o["_p"+phpvar.app][func]))return w_o["_p"+phpvar.app][func](v1,v2,v3,v4);else console.log("no func: "+func)};
";s:8:"pop_jmol";s:2720:"var backbone_only="*.CA,*.P,",timer={},A={},selmodef={"halo":true,"center":true};$(window).resize(function(){_timer.do_after_busy(function(){var wh=_winsize2jmolsize();Jmol.resizeApplet(jmol0,wh)},200)});$(function(){var a=_winsize2jmolsize();phpvar.jmolconf.width=a[0];phpvar.jmolconf.height=a[1];Jmol._alertNoBinary=false;$("#jmolinner").html(Jmol.getAppletHtml("jmol0",phpvar.jmolconf))});function _winsize2jmolsize(){return[$(window).width()-4,$(window).height()-54]}_cmd.init();
var _cmd={other:function(){if(phpvar.jmolcmd[qobj]){_jmols(phpvar.jmolcmd[qobj]);return true}else return false},asb:function(param,trg_obj){if(typeof param==="string")param={abid:param};_jmols('load "" FILTER "'+(param.bbonly?backbone_only:"")+"biomolecule "+param.abid+'";'+phpvar.jmolcmd.init,0);_ofunc("_datareloaded");_ofunc("_btn_deco","asb",trg_obj)},reload:function(){_jmols(phpvar.jmolcmd.reload+";"+phpvar.jmolcmd.init);_ofunc("_datareloaded");_ofunc("_btn_deco","asb")},select:function(param,
trg_obj){_select(param,trg_obj)}};function _jmols(s,f){s=s.replace(/_dq_/g,'"');_popvw.cmdhist("$ "+s);if(f!=undefined)_loadstart(f);try{Jmol.script(jmol0,s)}catch(e){return false}return true}
function _select(cmd,trg_obj){if(trg_obj!=undefined&&trg_obj==A.last_trg_obj){cmd="selectionHalos OFF; select all; label off;"+(selmodef.center?"zoomto 0.7 0;":"");_ofunc("_btn_deco","select");A.last_trg_obj=""}else{cmd="select "+cmd+(selmodef.halo?";selectionHalos ON;":"")+(selmodef.center?";if ({selected}.size > 0) zoomto 0.7 {selected} 0;":"");_ofunc("_btn_deco","select",trg_obj);A.last_trg_obj=trg_obj}return _jmols(cmd)}
function _jmolmsg(s1,s2,s3){if(!$.isFunction(Jmol.script)){_popvw.cmdhist("Jmol is busy now.","green");return}$("#loading").hide("slow");if(A.pg_calc==1)$("#calcsurf").show("slow");if(A.pg_calc==2)$("#calcstr").show("slow");if(A.pg_calc==1&&/ created with /.test(s2)){$("#calcsurf").hide("slow");A.pg_calc=0}if(A.pg_calc==2&&/ atoms selected/.test(s2)){$("#calcstr").hide("slow");A.pg_calc=0}if(s2=="")return;if(/Callback = |languageTranslation = /.test(s2))return;if(/^script [0-9]+ started$/.test(s2))return;
_popvw.cmdhist(s2,/ERROR/.test(s2)?"red":"blue");if(/atoms selected/.test(s2))_ofunc("_selected_count",s2.replace("atoms selected",""))}function _mousepick(p1,p2){w_o._vw.mousepick(window.name,p2)}function _asb(i,f){_jmols('load "" FILTER "'+(f?backbone_only:"")+"biomolecule "+i+'";'+phpvar.jmolcmd.init,0)}
function _loadstart(f){A.pg_calc=f==1?1:2;clearTimeout(timer.loaderror);$(".loadingbar").html(phpvar.loadingbar);$("#loading").show("fast");timer.loaderror=setTimeout(function(){$(".loadingbar").html(phpvar.loadingerror);timer.loaderror2=setTimeout("$('#loading').hide('slow')",5E3)},2E4)};
";s:10:"pop_molmil";s:10401:"var canvas,soup,$cvs=$("#molmilViewer");$(function(){initViewer()});$(window).resize(function(){_resize_canvas()});function _resize_canvas(){var w=$(window).width(),h=$(window).height();$cvs.get(0).width=w;$cvs.get(0).height=h;$cvs.width(w).height(h);if(canvas){canvas.renderer.resizeViewPort();canvas.update=true}}$("#molmil_layer").on("touchstart mousedown",function(){_gmenu.hide()});
function _gmenu_init(){$("#vwchkbox_blackbg").prop("checked",_localstr.getbool("blackbg"));$("#vwchkbox_stereo").prop("checked",_localstr.getbool("stereo"));$("#vwchkbox_fog").prop("checked",!_localstr.getbool("nofog"))}
function initViewer(){if(!window.molmil.configBox||!molmil.configBox.initFinished)return setTimeout(initViewer,100);_resize_canvas();canvas=molmil.createViewer($cvs.get(0));soup=canvas.molmilViewer;_mm.init();$(".molmil_UI_LB_icon").hide();$(".molmil_UI_RB_icon").hide();molmil.configBox.glsl_fog=!_localstr.getbool("nofog");molmil.configBox.stereoMode=_localstr.getbool("stereo")?1:0;molmil.configBox.BGCOLOR=_localstr.getbool("blackbg")?[0,0,0,1]:[1,1,1,1];molmil.configBox.stereoEyeSepFraction=10;_load.auto();
phpvar.shomenu&&_gmenu.show()}
var _load={auto:function(){var d=phpvar.ent.db;if(d=="sasbdb-model")d="sasbdb";this[d]()},pdb:function(){phpvar.ent.url?molmil.loadFile(phpvar.ent.url,"mmcif",function(sp,str){_load.postjob(sp,str)},true,soup):molmil.loadPDB(phpvar.ent.id,function(sp,str){_load.postjob(sp,str)},true,soup)},emdb:function(){try{molmil.loadFile(phpvar.ent.url,"obj",function(sp,str){_load.postjob(sp,str)},true,soup)}catch(e){console.log("catch error: "+e)}if(!_popvw.ready)this.postjob(soup)},chem:function(){molmil.loadCC(phpvar.ent.id,
function(sp,str){_load.postjob(sp,str)},true,soup)},sasbdb:function(){molmil.loadFile(phpvar.ent.url,"mmcif",function(sp,str){_load.postjob(sp,str)},true,soup)},postjob:function(){_mm.style_init();_mm.rebuild();_popvw.set_ready()}};
var _mm={mmname:{},ui:null,init:function(){this.mmname={color:{grp:molmil.colorEntry_Group,cpk:molmil.colorEntry_CPK,str:molmil.colorEntry_Structure},style:{hide:molmil.displayMode_None,defo:molmil.displayMode_Default,cartoon:molmil.displayMode_Cartoon,bs:molmil.displayMode_BallStick,stk:molmil.displayMode_Stick,cpk:molmil.displayMode_Spacefill}};this.ui=new molmil.UI(soup);return this},one_seq:{},resname2one:{"ALA":"A","CYS":"C","ASP":"D","GLU":"E","PHE":"F","GLY":"G","HIS":"H","ILE":"I","LYS":"K",
"LEU":"L","MET":"M","ASN":"N","PRO":"P","GLN":"Q","ARG":"R","SER":"S","THR":"T","VAL":"V","TRP":"W","TYR":"Y","DA":"A","DT":"T","DG":"G","DC":"C","A":"A","T":"T","U":"U","G":"G","C":"C","PSU":"U","MSE":"M","UNK":"X"},ccol:{"A":[154,166,204,1],"B":[141,204,141,1],"C":[204,154,160,1],"D":[204,204,102,1],"E":[204,154,204,1],"F":[141,192,192,1],"G":[204,166,90,1],"H":[192,102,102,1],"I":[196,178,143,1],"J":[0,153,204,1],"K":[164,74,74,1],"L":[82,164,136,1],"M":[123,164,40,1],"N":[190,104,190,1],"O":[0,
165,167,1],"P":[0,204,102,1],"Q":[48,143,90,1],"R":[0,0,111,1],"S":[151,146,86,1],"T":[0,80,0,1],"U":[102,0,0,1],"V":[102,102,0,1],"W":[102,0,102,1],"X":[0,102,102,1],"Y":[147,107,9,1],"Z":[142,27,27,1],"0":[0,204,102,1],"1":[48,143,90,1],"2":[0,0,111,1],"3":[151,146,86,1],"4":[0,80,0,1],"5":[102,0,0,1],"6":[102,102,0,1],"7":[102,0,102,1],"8":[0,102,102,1],"9":[147,107,9,1]},selection:null,select:function(cmd,param){if(typeof cmd=="string")this.selection=molmil.quickSelect(cmd,soup);else this.selection=
cmd;return this},selected:function(mode){return this.selection||soup.structures[0]},select_chain:function(chains){var atm=[],mol=[];if(typeof chains==="string")chains=[chains];soup.structures[0].chains.forEach(function(c){if(chains.indexOf(c.name)==-1)return;c.molecules.forEach(function(c2){atm=atm.concat(c2.atoms);mol.push(c2)})});this.selection={atoms:atm,molecules:mol};return this},select_res:function(inobj){var atm=[],mol=[],res_in_chain;console.log(inobj);soup.structures[0].chains.forEach(function(c){if(!inobj[c.name])return;
res_in_chain=inobj[c.name].map(function(v){return parseInt(v)});c.molecules.forEach(function(c2){if(res_in_chain.indexOf(c2.id)==-1)return;atm=atm.concat(c2.atoms);mol.push(c2)})});this.selection={atoms:atm,molecules:mol};return this},select_seq:function(asid,seq){var atm=[],mol=[],tg_chain,matchres={},m=0;soup.structures[0].chains.forEach(function(c){if(c.name!=asid)return;tg_chain=c.molecules});if(!tg_chain){_popvw.cmdhist("no chain: "+asid);return this}if(!this.one_seq[asid]){this.one_seq[asid]=
"";tg_chain.forEach(function(r){this.one_seq[asid]+=this.resname2one[r.name]||"X"}.bind(this))}while(true){m=this.one_seq[asid].indexOf(seq.toUpperCase(),m);if(m==-1)break;for(i=m;i<m+seq.length;i++)matchres[i]=true;++m}Object.keys(matchres).forEach(function(n){atm=atm.concat(tg_chain[n].atoms);mol.push(tg_chain[n])});this.selection={atoms:atm,molecules:mol};return this},style_init:function(only){var do_style=only!="color";var do_color=only!="style";this.select();if(phpvar.ent.db=="pdb"){if(do_style){this.style("defo").style("ligand_style");
this.select("resn HOH").color("cpk").style("hide").select()}if(do_color){if(phpvar.initstyle.multic)this.color("jmolchain");else this.color("grp");this.style("ligand_color")}}else if(phpvar.ent.db=="chem"){if(do_style)this.style("bs");if(do_color)this.color("cpk")}else if(phpvar.ent.db=="sasbdb"||phpvar.ent.db=="sasbdb-model")if(phpvar.initstyle.dummy){if(do_style)this.style("cpk");if(do_color)this.color("cpk")}else{if(do_style)this.style("defo");if(do_color)this.color("jmolchain")}phpvar.init_cmd&&
eval(phpvar.init_cmd);return this},color:function(mode){if(typeof mode!="string")molmil.colorEntry(this.selected(),molmil.colorEntry_Custom,mode);else if(mode=="jmolchain"){var that=this;this.selected().chains.forEach(function(c){if(c.isHet||c.molecules[0].name=="HOH")return;var cn=c.authName||c.name||"A";molmil.colorEntry(c,molmil.colorEntry_Custom,that.ccol[cn.substring(cn.length-1).toUpperCase()])})}else if(mode=="init")this.style_init("color");else molmil.colorEntry(this.selected(),this.mmname.color[mode]);
return this},style:function(mode){if(mode=="ligand_color")this.selected().chains.forEach(function(c){if(!c.isHet)return;molmil.colorEntry(c,molmil.colorEntry_CPK)});else if(mode=="ligand_style")this.selected().chains.forEach(function(c){if(!c.isHet)return;if(c.atoms&&c.atoms.length==1)molmil.displayEntry(c,molmil.displayMode_BallStick);else molmil.displayEntry(c,molmil.displayMode_Stick)});else if(mode=="init")this.style_init("style");else molmil.displayEntry(this.selected(),this.mmname.style[mode||
"defo"]);return this},show_sidechain:function(flg){var colatoms=[];molmil.displayEntry(_mm.selection.molecules,molmil.displayMode_Stick_SC);_mm.selection.atoms.forEach(function(c){if(c.element=="C")return;colatoms.push(c)});molmil.colorEntry(colatoms,molmil.colorEntry_CPK);return this},styleset:function(mode){this.select().style(mode).rebuild();_popvw.cmdhist("Style applied")},colorset:function(mode){this.select().color(mode).rebuild();_popvw.cmdhist("Color applied")},delchain:function(t_chain){if(typeof t_chain===
"string")t_chain=[t_chain];var idxs=[];soup.structures[0].chains.forEach(function(c,i){if(t_chain.indexOf(c.name)===-1)return;idxs.unshift(i)});idxs.forEach(function(i){soup.structures[0].chains.splice(i,1)});return this},focus:function(){var sel=this.selected(),cnt;if(sel.molecules)cnt=sel.molecules.length+" residues";if(sel.atoms)sel=sel.atoms;if(!cnt)cnt=sel.length+" atoms";molmil.selectAtoms(sel,false,soup);if(sel.length==0){molmil.resetCOG(canvas,false);_popvw.cmdhist("No atom selected","red")}else{molmil.selectionFocus(soup,
1);_popvw.cmdhist("Focusing on selected "+cnt);canvas.renderer.updateSelection()}this.rebuild();return this},reset_focus:function(){canvas.molmilViewer.calculateCOG();canvas.renderer.camera.z=canvas.molmilViewer.calcZ();canvas.renderer.camera.z_set=true;molmil.selectAtoms([],false,soup);this.rebuild();canvas.update=true;return this},zoom:function(lev){canvas.renderer.camera.z=canvas.renderer.camera.z/lev;canvas.update=true;return this},reset_view:function(){canvas.renderer.camera.reset();this.reset_focus();
return this},anim:function(p){},config:function(key,val){molmil.configBox[key]=val;molmil.shaderEngine.recompile(canvas.molmilViewer.renderer);if(key==="stereoMode"){canvas.renderer.camera.z=canvas.molmilViewer.calcZ()/(val?1/2:3);canvas.renderer.camera.z_set=true;if(val)_mm.zoom(2)}canvas.update=true;return this},uiset:function(cmd,param){if(cmd=="molmil_menu"){$(".molmil_UI_LB_icon").toggle("medium");$(".molmil_UI_RB_icon").toggle("medium")}else if(cmd=="console"){this.ui.toggleCLI();_resize_canvas()}return this},
rebuild:function(){soup.renderer.initBuffers();canvas.update=true;return this},asb:function(aid,disp_mode){molmil.toggleBU(aid===undefined?-1:aid,disp_mode||4,3,soup.structures[0],soup);var str="assembly #"+aid;if(aid===undefined||aid===-1){_mm.select().rebuild();str="asymmetric unit"}_popvw.cmdhist("Displaying "+str);return this}};
var _cmd={asb:function(param,trg_obj){_mm.asb(param);trg_obj&&_ofunc("_btn_deco","asb",trg_obj)},focus_chain:function(param,trg_obj){_mm.select_chain(param).focus();trg_obj&&_ofunc("_btn_deco","select",trg_obj)},focus_res:function(param,trg_obj){_mm.select_res(param).show_sidechain().focus();trg_obj&&_ofunc("_btn_deco","select",trg_obj)},focus_res_ns:function(param,trg_obj){_mm.select_res(param).focus();trg_obj&&_ofunc("_btn_deco","select",trg_obj)},focus_seq:function(param,trg_obj){_popvw.cmdhist("Sequence: "+
param.aid+"-"+param.seq);_mm.select_seq(param.aid,param.seq).focus();trg_obj&&_ofunc("_btn_deco","select",trg_obj)},focus_reset:function(){_mm.reset_focus()},water:function(param){soup.waterToggle(param);_mm.select("resn HOH").style(param?"bs":"hide").rebuild();_popvw.cmdhist(param?"Water shown":"Water hidden")},other:function(param,trg_obj){_popvw.cmdhist("unknown command")}};
_vwui={style:function(o){_mm.select().style($(o).val()).rebuild();_popvw.cmdhist("Style applied")},color:function(o){_mm.select().color($(o).val()).rebuild();_popvw.cmdhist("Color applied")},blackbg:function(o){var ck=$(o).prop("checked");_mm.config("BGCOLOR",ck?[0,0,0,1]:[1,1,1,1]);_localstr.setbool("blackbg",ck)},fog:function(o){var ck=$(o).prop("checked");_mm.config("glsl_fog",ck);_localstr.setbool("nofog",!ck)},stereo:function(o){var ck=$(o).prop("checked");_mm.config("stereoMode",ck?1:0);_localstr.setbool("stereo",
ck)}};
";s:7:"pop_mov";s:4557:"var $player=$("#m0"),$movbox=$("#moviebox"),$msgbox=$("#movmsgbox");$(function(){_mov.init();_slider.init();_rotate.init()});$(window).on({resize:function(){_gmenu.resize();_tab.shrink();_timer.do_after_busy(function(){_mov.resized()})},beforeunload:function(e){w_o&&w_o._pmov&&w_o._pmov.closed(window.name)}});
_mov={size:200,size_px:"200px",reso:"s",pausing:true,init:function(){$player.jPlayer({cssSelectorAncestor:"#moviebox",preload:"auto",backgroundColor:"#ffffff",loop:true,errorAlerts:true,supplied:"m4v, webmv",size:{width:this.size_px,height:this.size_px},click:function(){_play(this.pausing)}.bind(this),solution:"html",ready:function(){_mov.resized();_mov.movset(phpvar.mov_url[_mov.reso])}});this.calc_size()},resized:function(){var prev_res=this.reso;this.calc_size();$player.jPlayer({size:{height:this.size_px,
width:this.size_px}});$msgbox.css({width:this.size});$movbox.css({width:this.size});if(prev_res!=this.reso)this.movset(phpvar.mov_url[this.reso])},calc_size:function(){this.size=Math.min($(window).height()-50,$(window).width());this.size_px=this.size+"px";this.reso=this.size<250?"s":"l"},$icon:$(".mvicon"),icon:function(f){this.$icon.stop(1,1).show().attr("src","img/"+f+".gif").fadeOut(4E3)},$msg:$(".mvmsg"),msg:function(s,s2){this.$msg.stop(true,true).text(phpvar.mv_str[s]||s).show().fadeOut(2E3)},
movset:function(obj){$player.jPlayer("setMedia",obj).jPlayer(this.pausing?"pause":"play")},play:function(flg,from){if(flg){$player.jPlayer("play");this.pausing=false;this.icon("play");this.msg("play")}else{$player.jPlayer("pause");this.pausing=true;this.icon("pause");this.msg("pause")}},orient:function(t){if(!this.pausing||_slider.sliding)return;this.play();$player.jPlayer("pause",t)},view:function(s){this.play();this.orient({top:9.6,bottom:13.2,left:1.8,right:5.4,front:0,back:3.6,cut:18.5}[s]);this.icon(s);
this.msg(s)}};
_rotate={prev_mpos:{x:0,y:0},movgeo:undefined,geo_reset:function(){this.prev_mpos={x:0,y:0};this.movgeo=undefined},init:function(){$movbox.on({"mouseenter":function(){_mov.msg(_mov.pausing?"mouse":"playing");this.geo_reset()}.bind(this),"mouseleave":function(){this.geo_reset()}.bind(this),"mousemove":function(e){if(_mov.pausing&&!_slider.sliding)this.rot(e)}.bind(this),"touchstart":function(e){if(_slider.sliding)return;this.rot(e);if(event.changedTouches.length>1)return;_mov.msg("touch");this.geo_reset()}.bind(this),
"touchmove":function(e){if(_slider.sliding)return;if(event.changedTouches.length>1)return;event.preventDefault();this.rot({pageX:event.changedTouches[0].pageX,pageY:event.changedTouches[0].pageY})}.bind(this)})},rot:function(e){var x,y,dx,dy;if(_timer.busy(50))return;if(this.movgeo==undefined)this.movgeo={w:$player.width(),l:$player.offset().left,t:$player.offset().top};x=(e.pageX-this.movgeo.l)/this.movgeo.w-0.5;y=(e.pageY-this.movgeo.t)/this.movgeo.w-0.5;dx=Math.abs(this.prev_mpos.x-x);dy=Math.abs(this.prev_mpos.y-
y);if(y>0.5||dx+dy<0.005)return;this.prev_mpos={x:x,y:y};if(y<-0.4)this.slice(x);else if(dx>dy)this.rot_x(x);else this.rot_y(y)},rot_x:function(x){var p,a;if(x>0){p="or_l";_ori(x*9.5)}else{p="or_r";_ori(7+x*9.5)}a=Math.abs(x);_mov.icon(a>0.4?"or_bk":a>0.3?p+"3":a>0.15?p+"2":a>0.05?p+"1":"or_f")},rot_y:function(y){var p,a;if(y>0){p="or_t";_ori(y*9.5+7.2)}else{p="or_b";_ori(15+y*9.5)}a=Math.abs(y);_mov.icon(a>0.4?"or_bk":a>0.3?p+"3":a>0.15?p+"2":a>0.05?p+"1":"or_f")},slice:function(x){_ori((x+0.5)*
7+15.5);_mov.icon(x<-0.2?"or_c3":x>0.2?"or_c1":"or_c2")}};
_slider={$seekbar:$(".jp-seek-bar"),$playbar:$(".jp-play-bar"),sliding:false,bar_left:0,bar_width:0,init:function(){this.$seekbar.on({"mousedown touchstart":function(e){this.start(e)}.bind(this),"mousemove touchmove":function(e){this.move(e)}.bind(this)});$("body").on({"mouseup touchend mouseleave":function(){if(this.sliding)this.end()}.bind(this),"mousemove touchmove":function(e){if(this.sliding)this.move(e)}.bind(this)})},start:function(e){this.$playbar.addClass("playbar_active");this.sliding=true;
this.bar_left=this.$seekbar.offset().left+2;this.bar_width=this.$seekbar.width()/100;this.pos(e)},move:function(e){if(!this.sliding||_timer.busy(50))return;this.pos(e)},end:function(){this.sliding=false;this.$playbar.removeClass("playbar_active")},pos:function(e){$player.jPlayer("playHead",(e.pageX-this.bar_left)/this.bar_width)}};function _movnum(n){_mov.movset(phpvar.movs_url[n][_mov.reso]);phpvar.postv.num=n;_gmenu.reset(true)}function _play(f){w_o._pmov.play(f);_mov.play(f)}
function _ori(t){_mov.orient(t);w_o._pmov.ori(t)}function _ori2(s){w_o._pmov.ori2(s);_mov.view(s)};
";s:9:"pop_sview";s:2181:"var _sview={$container:$("#container"),bgcolor:new THREE.Color(_localstr.getbool("blackbg")?0:16777215)};init();animate();
function init(){_sview.camera=new THREE.PerspectiveCamera(20,window.innerWidth/window.innerHeight,1,phpvar.init_pos.dep*10);_sview.camera.position.z=phpvar.init_pos.dep*2.5;_sview.controls=new THREE.TrackballControls(_sview.camera);_sview.controls.rotateSpeed=3;_sview.controls.zoomSpeed=-3;_sview.controls.panSpeed=0.1;_sview.controls.noZoom=false;_sview.controls.noPan=false;_sview.controls.staticMoving=true;_sview.controls.keys=[65,83,68];_sview.controls.addEventListener("change",render);_sview.scene=
new THREE.Scene;_sview.scene.add(new THREE.AmbientLight(5592405,0.2));_sview.light=new THREE.DirectionalLight(11184810,0.4);_sview.scene.add(_sview.light);_sview.scene.fog=new THREE.Fog(_sview.bgcolor,phpvar.init_pos.dep-phpvar.init_pos.fogn,phpvar.init_pos.dep+phpvar.init_pos.fogf);var onProgress=function(xhr){};var onError=function(xhr){_popvw.cmdhist("Load error","red")};var manager=new THREE.LoadingManager;manager.onLoad=function(){_popvw.set_ready()};var loader=new THREE.OBJMTLLoader(manager);
loader.load(phpvar.filepath.obj,phpvar.filepath.mtl,function(object){object.position.x=phpvar.init_pos.x;object.position.y=phpvar.init_pos.y;object.position.z=phpvar.init_pos.z;_sview.scene.add(object)},onProgress,onError);_sview.renderer=new THREE.WebGLRenderer;_sview.$container.append(_sview.renderer.domElement);_resize_canvas()}
function animate(){requestAnimationFrame(animate);render();_sview.controls.update();var d=_sview.camera.position.distanceTo(_sview.scene.position);_sview.scene.fog.near=d-phpvar.init_pos.fogn;_sview.scene.fog.far=d+phpvar.init_pos.fogf;_sview.light.position.copy(_sview.camera.position)}function render(){_sview.renderer.render(_sview.scene,_sview.camera)}$(window).resize(function(){_resize_canvas()});
function _resize_canvas(){var sz={w:window.innerWidth,h:window.innerHeight};_sview.renderer.setPixelRatio(window.devicePixelRatio);_sview.renderer.setClearColor(_sview.bgcolor);_sview.renderer.setSize(sz.w,sz.h);_sview.camera.aspect=sz.w/sz.h;_sview.camera.updateProjectionMatrix();_sview.controls.update()};
";s:5:"popup";s:1086:"var PU={},zmax=100;$(function(){$("._pu")._popup()});
jQuery.fn.extend({_ztop:function(){zmax++;return this.css("z-index",zmax)},_popup:function(c){return this.each(function(){var o_t=$(this);var o_p;if(c==undefined){o_p=o_t.next();if(o_p.length==0)o_p=o_t.parent().next();o_p.appendTo("body")}else o_p=$(c);PU.fnchpop="$( '.pubox' ).fadeOut( 'medium' )";o_t.hover(function(){o_t.css("opacity",0.85).addClass("_pu_act");clearTimeout(T.popshow);clearTimeout(T.pophide);T.popshow=setTimeout(function(){$(".pubox").hide();clearTimeout(T.popshow);clearTimeout(T.pophide);
o_p.show().css({opacity:0.85})._ztop().position({of:o_t,my:"left top",at:"left bottom"})},200,o_p)},function(){o_t.css("opacity",1).removeClass("_pu_act");clearTimeout(T.popshow);clearTimeout(T.pophide);T.pophide=setTimeout(PU.fnchpop,100)});o_p.hover(function(){clearTimeout(T.popshow);clearTimeout(T.pophide);o_p.show().css("opacity",1);o_t.addClass("_pu_act")},function(){clearTimeout(T.popshow);clearTimeout(T.pophide);T.pophide=setTimeout(PU.fnchpop,1E3);o_p.css("opacity",0.7);o_t.removeClass("_pu_act")})})}});
";s:5:"quick";s:7626:"$(function(){$(".asymbar_box").click(function(){$(this).children(".asymbar_tx").toggle()});$(".chemsvg").click(function(){var o=$(this);var s=o.width()==100?500:100;o.animate({width:s,height:s},"medium")});$("#valrep_img").click(function(){var o=$(this);o.animate({width:o.width()>300?300:600},"medium")});$(".svgimg").click(function(){var $o=$(this);var flg_large=$o.height()>300;$o.animate({height:flg_large?100:500},"medium",function(){flg_large?_pop.hide():""})});$(".eqimg").click(function(){var $t=
$(this);$t.hasClass("eqimgl")?$t.removeClass("eqimgl"):$t.addClass("eqimgl")});phpvar.randimgck?_randimg.ckget():_randimg.init();_slab.init();_slcimg.init()});
var _randimg={$box:$("#randimg"),$btns:$(".randimgbtn"),$histbox:$("#histimgbox"),flg:{rand:false,hist:false},init:function(){this.$box.html()==""&&this.rep()},rep:function _randimg(mode,obj){this.$btns.removeClass("shine");obj&&$(obj).addClass("shine");this.$box._loadex({u:"ajax.php",v:{mode:"randimg",rmode:mode,t:Date()}})},ckget:function(){if(this.$box.html()!="")return;this.$box._loadex({u:"ajax.php",v:{mode:"randimgck",t:Date()}})},hist:function(){if(this.$histbox.html()!="")return;this.$histbox._loadex({u:"ajax.php",
v:{mode:"randimghist",t:Date()}})}};var _dettab={get:function(mode,eid){var $o=$("#box"+mode+eid);if($o.html=="")return;$o.load("quick-ajax.php",{ajax:mode,id:phpvar.entinfo.did,eid:eid},function(){$(this).prev().hide()})},reget:function(mode,eid,aid){$("#box"+mode+eid).load("quick-ajax.php",{ajax:mode,id:phpvar.entinfo.did,eid:eid,aid:aid})}};
var _slcimg={sizing:false,line_reset:true,$lines:$(".l_slc"),$imgs:$("#pstable td img"),$resizebtns:$(".pssize"),$xbtn:$("#pstable tr th button.xbtn"),$td:$("#pstable td"),init:function(){var that=this;$(".slc").hover(function(){that.hov_in(this)},function(){that.hov_out()});this.$lines.mouseover(function(){$(this).stop().hide()})},hov_in:function(domobj){if(this.sizing)return;var i=$(domobj).attr("id"),hov={ang:i.substr(4,1),lev:i.substr(5,1)},angs=["z","y","x"],levs=["a","b","c","_","s"],lev,cur=
{},$img,img={},$line,ani1,ani2,i,j;this.$lines.stop(1,1).fadeOut(0.5);for(i in angs)for(j in levs){cur={ang:angs[i],lev:levs[j]};if(cur.ang==hov.ang)continue;$img=$("#slc_"+cur.ang+cur.lev);if($img.length===0||!$img.is(":visible"))continue;img={wid:$img.width(),hei:$img.height(),top:$img.offset().top,lef:$img.offset().left};$line=$("#l_slc_"+cur.ang+cur.lev);if(hov.ang=="z"||hov.ang=="y"&&cur.ang=="z"){lev=phpvar.lv2r[0][cur.ang][hov.lev];lev=Math.round(img.hei*(this.flg_yflip?1-lev:lev));ani1={opacity:1,
top:img.top+lev+1,left:img.lef+2,width:img.wid-2,height:0}}else{lev=Math.round(img.wid*phpvar.lv2r[1][cur.ang][hov.lev]);ani1={opacity:1,top:img.top+2,left:img.lef+lev+1,width:0,height:img.hei-2}}ani2={top:img.top+2,left:img.lef+2,width:img.wid-2,height:img.hei-2};if(this.line_reset)$line.stop(1,1).css(ani2);if(hov.lev=="s"||hov.lev=="_")$line.stop(1,1).animate(ani1,10).animate(ani2,800).animate(ani1,10).fadeTo(2E3,0.6);else $line.stop(1,1).show().animate(ani1,"fast").fadeTo(2E3,0.6)}this.line_reset=
false},hov_out:function(s){this.$lines.stop(1,1).fadeOut(s==undefined?2E3:s)},$sld_size:$("#sld_size"),sldsize:function(){_timer.do_after_busy(function(){this.size(this.$sld_size.val())}.bind(this),"sldsize",200)},size:function(size,obj){this.line_reset=true;this.sizing=true;this.hov_out(100);this.$imgs.each(function(){var o=$(this),w=o.width,h=o.height,src=o.attr("src"),sizeto=w>h?{width:"auto",height:size}:{width:size,height:"auto"},src=size==100?src.replace("png","jpg"):src.replace("jpg","png");
o.stop(0,0).animate(sizeto,"medium",function(){_slcimg.sizing=false}).attr("src",src)});this.$resizebtns.prop("disabled",false);obj&&$(obj).prop("disabled",true);$("#t_Map").css({position:"relative",zIndex:size>100?200:0});if(size>100)this.$xbtn.show("medium");else{this.$xbtn.hide("medium").attr("onclick","_slcimg.hide(this)").text("X");this.$td.show("medium")}},hide:function(o,flg){var o=$(o),p=o.parent("th");this.line_reset=true;o.attr("onclick","_slcimg.show(this)").text(" + ");p.children("p").hide("medium");
p.nextAll("td").hide("medium")},show:function(o){var o=$(o),p=o.parent("th");this.line_reset=true;o.attr("onclick","_slcimg.hide(this)").text("X");p.children("p").show("medium");p.nextAll("td").show("medium")},$sld_brgt:$("#sld_brgt"),$sld_cont:$("#sld_cont"),$chkb_invt:$("#chkb_invt"),filter:function(){_timer.do_after_busy(function(){this.$imgs.css("filter","brightness("+this.$sld_brgt.val()+"%) "+"contrast("+this.$sld_cont.val()+"%) "+"invert("+(this.$chkb_invt.prop("checked")?100:0)+"%)")}.bind(this),
"sldfilter",50)},flg_yflip:false,$chkb_yflip:$("#chkb_yflip"),yflip:function(){this.flg_yflip=this.$chkb_yflip.prop("checked");this.$imgs.css("transform","scaleY("+(this.flg_yflip?"-":"")+"1)")},reset:function(){this.$sld_brgt.val(100);this.$sld_cont.val(100);this.$sld_size.val(100);this.$chkb_invt.prop("checked",false);this.$chkb_yflip.prop("checked",false);this.sldsize();this.filter()}};
var _qvw={seqsel:function(odom){var seq,$o=$(odom);if(window.getSelection)seq=window.getSelection().toString();else if(document.selection)seq=document.selection.createRange().text;seq=seq.replace(/[^A-Za-z]/g,"").toUpperCase();if(seq.length==0)return;_vw.open(phpvar.entinfo.did,{obj:$o,cmd:{"molmil":{cmd:"focus_seq",param:{seq:seq,aid:$o.data("aid")}}}})}};function _jmolq(que){_pjmol.que("jmol-main",que)}
function _btn_deco(mode,obj){if(mode=="select")$(".select_btn").removeClass("act").removeClass("failed");else if(mode=="asb")$(".asb_btn").removeClass("act");obj&&$(obj).addClass("act")}function _datareloaded(){_btn_deco("select");_btn_deco("asb")}function _selected_count(num){if(num=="0")$(".select_btn.act").addClass("failed")}var _uicom={menu:function(o){_uicom.ex($(o).children("option:selected").data())},btn:function(o){_uicom.ex($(o).data())},ex:function(d){d.jmolc&&_jmolq(d.jmolc);d.js&&eval(d.js)}};
var _vwcmd={quality:function(trg_obj){var f=$(trg_obj).prop("checked");_jmolq(f?"hq":"lq");_cookie("jmol_hq",f?1:0)},blackbg:function(trg_obj){_jmolq($(trg_obj).prop("checked")?"bgblack":"bgwhite")},reset_view:function(){$(".menu_view").val("d");$(".chk_view").prop("checked",false);_jmolq("bgwhite");_jmolq("lq");_jmolq("boundbox off; stereo off; reset;");_slab.reset()}};
var _slab={$sld:$("#slab_slider"),$range:{},fvals:{c:-1,t:-1},init:function(){var that=this;this.$sld.slider({values:[0,100],range:true,create:function(){that.$range=that.$sld.children(".ui-slider-range")},slide:function(event,ui){if(!_timer.busy(300))that.slide(ui.value)},stop:function(event,ui){that.slide(ui.value)}})},getpos:function(){return this.$sld.slider("option","values")},setpos:function(v1,v2){this.$sld.slider("values",v1,v2)},reset:function(){this.$sld.slider({values:[0,100]});this.fvals=
{t:-1,c:-1};$("#slab_fix").val("none");this.$range.removeClass("shine").text("");_jmolq("slab off;depth 0;set zDepth 0; set zshade on;slab 60")},slide:function(cv){var v=this.getpos();if(this.fvals.t>-1)if(cv!=v[1])this.setpos(1,Math.min(100,v[0]+this.fvals.t));else this.setpos(0,Math.max(0,v[1]-this.fvals.t));else if(this.fvals.c>-1)if(cv!=v[1])this.setpos(1,Math.min(100,2*this.fvals.c-v[0]));else this.setpos(0,Math.max(0,2*this.fvals.c-v[1]));_jmolq("slab "+(100-v[0])+";set zDepth "+(100-v[1])+
"; slab on;")},fix:function(o){var fixmode=$(o).val();var v=this.getpos();if(fixmode=="thick"){this.fvals.t=v[1]-v[0];this.$range.addClass("shine").text("")}else if(fixmode=="center"){this.fvals.c=Math.round((v[1]+v[0])/2);this.$range.addClass("shine").text("|")}else{this.fvals={t:-1,c:-1};this.$range.removeClass("shine").text("")}}};
";s:6:"result";s:1184:"var tid=-1,formcont;$(function(){$(".idcol").hover(function(){var t=$(this).addClass("psel"),o=t.offset(),w=300;if(tid!=-1)clearTimeout(tid);else w=10;tid=setTimeout(function(){$("#popup").hide().text("").css({top:o.top,left:o.left+t.width()-10}).load("ajax_id2img.php?m=p&id="+t.text()).fadeIn("medium")},w)},function(){$(this).removeClass("psel");clearTimeout(tid)});$("#form1").change(function(){_changed()}).keyup(function(){_changed()});_jmp();formcont=$("#form1").serialize()});
function _jmp(){$(".jmp").attr("href","javascript:void(0);").click(function(){_startsearch("from="+$(this).attr("cnt"))})}function _changed(){var f=$("#form1").serialize();if(formcont==f)return;formcont=f;$("#result, .cnt").fadeTo("fast",0.5);clearTimeout(T.waitsearch);T.waitsearch=setTimeout("_startsearch()",1E3)}
function _startsearch(s){s=s!=undefined?s+"&":"";$.getJSON("?aj=1&"+s+$("#form1").serialize(),function(json){$(".cnt").html(json.counter).fadeTo("fast",1);$("#result").html(json.result).fadeTo("fast",1);if(json.hide)$("#form2").hide();else $("#form2").show();_jmp()})}function _pophide(){$("#popup").hide()}function _tsort(s,r){$("#tsort").val(s);$("#trev").val(r);_startsearch()};
";s:10:"searchform";s:248:"$(function(){$("#rb_mode_list, #rb_mode_table").change(function(){if($("#rb_mode_list:checked").val()){$(".r_list").fadeIn("slow");$(".r_table, .srtdiv").fadeOut("slow")}else{$(".r_table, .srtdiv").fadeIn("slow");$(".r_list").fadeOut("slow")}})});
";s:6:"simple";s:10748:"var dt=new Date;dt.setDate(dt.getDate()+365);var ckdate=dt.toGMTString();document.cookie="mov_win_size=; expires=expires=Tue, 10-May-1930 00:00:00 GMT;";document.cookie="show_menu=; expires=expires=Tue, 10-May-1930 00:00:00 GMT;";$(function(){_idbox.init();_extcol.init();_acomp.init();_vw.init_vwmenu()});$(window).on({resize:function(){var wid=900<window.innerWidth;_extcol.change(0)},beforeunload:function(e){_pmov.close();_vw.close_all()},scroll:function(e){_extcol.scroll()}});
function _cookie(k,v){document.cookie=k+"="+escape(v)+";"+"expires="+ckdate+";"}function _fsize(s){$("body").css("font-size",["x-small","small","medium","large","x-large"][s]);_cookie("vfsize",s);$(".fsizebtn").prop("disabled",false);$("#fsize"+s).prop("disabled",true)}function _pagenum(pg,name,speed){var p=name?phpvar.pagenum[name]:phpvar.pagenum;$(p.div)._loadex({u:p.url+pg,v:p.pvar,speed:speed})}
_extcol={win_limwidth:900,showing:false,btn_menu_fixed:false,$col:$("#ext_column"),$mainb:$("#mainbox"),$menu:$("#menubox"),$headbtn:$("#top_opt"),$mov:$("#movctrl"),$vw:$(".elm_vw"),$btn_menu_pop:$("#btn_menu_pop"),win_is_wide:function(){return $(window).innerWidth()>900},init:function(){if(this.win_is_wide()&&_localstr.get("show_menu")!=="0")this.menu(true,0.1);this.change(0);this.scroll()},scroll:function(){if(this.showing)return;if($(window).scrollTop()>this.$headbtn.offset().top+this.$headbtn.height()){if(!this.btn_menu_fixed){this.$btn_menu_pop.addClass("btn_menu_fixed").stop(1,
1).fadeTo(3E3,0.5);this.btn_menu_fixed=true}}else if(this.btn_menu_fixed){this.$btn_menu_pop.stop(1,1).removeClass("btn_menu_fixed").fadeTo(500,1);this.btn_menu_fixed=false}},change:function(speed){var w=this.$col.width();_pop.hide();this.$mainb.animate({marginRight:w>30&&this.win_is_wide()?w+5:0},speed==undefined?"fast":speed,function(){this.$col.height($(window).height());_tab.shrink()}.bind(this))},menu:function(f,speed){if(speed==undefined){speed="medium";_localstr.setbool("show_menu",f)}if(f){this.$menu.show(speed,
function(){this.change()}.bind(this));this.$headbtn.hide(speed);this.showing=true}else{this.$menu.hide(speed,function(){this.change()}.bind(this));if(this.btn_menu_fixed)this.$btn_menu_pop.stop(1,1).fadeTo(0,1).fadeTo(3E3,0.5);this.$headbtn.show(speed);this.showing=false}this.scroll()}};
var _idbox={$inpbox:$("#idbox"),$info:$("#ent_info"),init:function(){this.$inpbox.on("input",function(){_timer.do_after_busy(function(){this.change()}.bind(this),300,"idbox")}.bind(this))},info:function(cont){cont?this.$info.html(cont).slideDown("medium"):this.$info.slideUp("medium");_pop.hide()},set:function(id){this.$inpbox.val(id);this.change()},change:function(){this.que=false;var i=this.$inpbox.val();i.length>1?$.get(phpvar.idservadr+i,function(d){_idbox.info(d)}):this.info()},clear:function(){this.$inpbox.val("");
this.info()}};var _acomp={init:function(){$(".acomp").on("input",function(o){_timer.do_after_busy(function(){this.getlist(o.target)}.bind(this),500,"acomp")}.bind(this))},getlist:function(o){var $o=$(o);var listname=$o.attr("list");$.get("ajax.php",{w:$o.val(),l:listname,mode:"acomp"},function(res){res&&$("#"+listname).html(res)})}};
var _hdiv={$allbtn:$("h1 div.oc_btn"),$excl:$("#hdiv_exc"),$lev1:$(".lev1"),oc:function(eid,flg,func){_pop.hide();var $div=$("#oc_div_"+eid),$btn=$("#oc_btn_"+eid),flg=flg!=undefined?flg:$div.is(":hidden");if(this.$excl.prop("checked")&&$div.hasClass("lev1"))flg=2;if(flg==2){this.$lev1.not("div#oc_div_"+eid).slideUp("medium");this.$allbtn.text("+")}if(flg){$div.slideDown("medium",func);$btn.text("-");var s=$div.data("js");s&&eval(s)}else{$div.slideUp("medium");$btn.text("+")}},focus:function(eid){this.oc(eid,
1,function(){var $h=$("h1#h_"+eid);$("html,body").animate({scrollTop:$h.offset().top},"slow",function(){$h.stop(1,1).fadeOut("fast",function(){$h.fadeIn("medium")})})})},all:function(){var flg=false;this.$allbtn.each(function(){flg=$(this).text()=="-"?true:flg});if(flg){this.$lev1.slideUp("medium");this.$allbtn.text("+");this.$excl.prop("checked",true)}else{this.$lev1.slideDown("medium");this.$allbtn.text("-");this.$excl.prop("checked",false)}},all2:function(domobj){var $lev1=$(domobj).parents("div.lev1"),
$btn=$lev1.children("h2").children("div.oc_btn"),flg=false;$btn.each(function(){if($(this).text()=="-")flg=true});if(flg){$lev1.children("div.lev2").slideUp("medium");$btn.text("+")}else{$lev1.children("div.lev2").slideDown("medium");$btn.text("-")}}};
var _pmov={$menuctrl:$("#movctrl"),wins:{},size:0,open:function(data_id,mov_num){var win_id="mov-"+data_id+(mov_num?"-"+mov_num:"");this.$menuctrl.slideDown("fast");if(this.wins[win_id]){this.wins[win_id].focus();return}$(_entitem("mov",data_id,mov_num)).appendTo("#movlist").attr("id","movidx_"+win_id).data("wid",win_id).slideDown("medium");this.movsize=_localstr.get("mov.size")-0||400;this.wins[win_id]=window.open(phpvar.vwurl.mov+data_id+(mov_num?"&num="+mov_num:""),win_id,"menubar=no,location=no,scrollbars=0,"+
"width="+(this.movsize+4)+",height="+(this.movsize+54))},size:function(val){this.movsize=[200,300,400,600,800][val]-0||Math.max(200,this.movsize+=val);_localstr.set("mov.size",this.movsize);this.all(function(o){o.resizeTo(o.outerWidth-o.innerWidth+this.movsize+4,o.outerHeight-o.innerHeight+this.movsize+54)}.bind(this));this.tile()},play:function(val){this.all(function(o){o._mov.play(val);o.focus()})},ori:function(val){this.all(function(o){o._mov.orient(val)})},ori2:function(val){this.all(function(o){o._mov.view(val);
o.focus()})},close:function(){$("#movlist").html("");this.$menuctrl.slideUp("fast");this.all(function(o){o.close()})},tile:function(){var x=y=y_nex=x_win=y_win=0,x_scr=window.parent.screen.width,y_scr=window.parent.screen.height,mgn=2;$.each(this.wins,function(win_id,o){x_win=o.outerWidth;y_win=o.outerHeight;if(x+x_win>x_scr){x=0;y=y_nex}o.moveTo(x,y);y_nex=y_nex>y+y_win?y_nex:y+y_win;x=o.screenX+x_win+mgn;if(y>y_scr)y=0;o.focus()})},all:function(fn){$.each(this.wins,function(win_id,o_win){if(o_win.closed)this.closed(win_id);
else fn(o_win)}.bind(this))},win:function(flg,domobj){var wid=$(domobj).parent().data("wid");var o=this.wins[wid];if(!o||o.closed)this.closed(wid);flg?o.focus():o.close()},closed:function(win_id){delete this.wins[win_id];$("#movidx_"+win_id).hide("medium",function(){$(this).detach()});if(Object.keys(this.wins).length==0)this.$menuctrl.slideUp("fast")}};
_vw={wins:{},cmdhist_lastid:false,cmdhist_lastmsg:false,qtimer:{},qloopcnt:{},ques:{},conf:{apps:{mol:_localstr.get("viewer.apps.mol")||"molmil",map:_localstr.get("viewer.apps.map")||"sview"},winsize:_localstr.getjson("viewer.winsize")||[500,500]},$menu_apps:{map:$(".menu_viewer_map"),mol:$(".menu_viewer_mol")},$menuctrl:$("#vwctrl"),$cmdhist_box:$("#cmdhist"),$pick_id:$("#p_id"),$pick_chain:$("#p_chain"),$pick_res:$("#p_res"),$pick_atom:$("#p_atom"),$pick_img:$("#p_img"),init_vwmenu:function(){this.$menu_apps.map.val(this.conf.apps.map);
this.$menu_apps.mol.val(this.conf.apps.mol)},select_defvw:function(type,domobj){var v=$(domobj).val();if(v==this.conf.apps[type])return;this.conf.apps[type]=v;_localstr.set("viewer.apps."+type,v);this.init_vwmenu()},open:function(did,param){var o={};var viewer_appli=this.conf.apps[param&&param.map?"map":"mol"];var win_id=viewer_appli+"-"+did;this.$menuctrl.slideDown("fast");if(param){if(param.obj)o=$(param.obj).data(viewer_appli);if(param.cmd&&param.cmd[viewer_appli])o=param.cmd[viewer_appli];if(o){o.trg_obj=
param.obj;this.que(win_id,o,viewer_appli)}}if(this.wins[win_id]&&!this.wins[win_id].closed){this.wins[win_id].focus();return false}$(_entitem("mol",did)).appendTo("#vwlist").attr("id","vwidx_"+win_id).data("wid",win_id).slideDown("medium");this.wins[win_id]=window.open(phpvar.vwurl[viewer_appli]+did,win_id,"menubar=no,location=no,scrollbars=0,"+"width="+this.conf.winsize[0]+",height="+this.conf.winsize[1]);return true},que:function(win_id,que,vapp){if(!que)return;vapp=vapp||"viewer";this.ques[win_id]=
this.ques[win_id]||[];this.ques[win_id].push(que);clearInterval(this.qtimer[win_id]);this.qloopcnt[win_id]=0;this.qtimer[win_id]=setInterval(function(){++this.qloopcnt[win_id];if(this.qloopcnt[win_id]>50){this.msg_que(win_id,"timeout");this.clear_que(win_id);return}if(this.wins[win_id]&&this.wins[win_id].closed){this.clear_que(win_id);delete this.wins[win_id];this.msg_que(win_id,"window is closed");return}if(!this.wins[win_id]||!this.wins[win_id]._popvw||!this.wins[win_id]._popvw.ready){this.msg_que(win_id,
"not ready");return}clearInterval(this.qtimer[win_id]);this.wins[win_id].focus();this.wins[win_id]._popvw.que_exe(this.ques[win_id]);this.clear_que(win_id);this.msg_que(win_id,"ok")}.bind(this),500)},clear_que:function(win_id){this.ques[win_id]=[];clearInterval(this.qtimer[win_id])},msg_que:function(win_id,str){this.cmdhist(win_id,"que of "+win_id+": "+str)},win:function(flg,domobj){var wid=$(domobj).parent().data("wid");var o=this.wins[wid];if(!o||o.closed)this.closed(wid);if(flg){window.blur();
o.focus()}else o.close()},winsized:function(wh){_localstr.setjson("viewer.winsize",wh);this.conf.winsize=[wh[0],wh[1]]},close_all:function(){$.each(this.wins,function(win_id,o_win){if(o_win.closed)return;o_win.close()});this.$menuctrl.slideUp("fast")},closed:function(win_id){delete this.wins[win_id];this.cmdhist(win_id,"Window closed","green");$("#vwidx_"+win_id).hide("medium",function(){$(this).detach()});if(Object.keys(this.wins).length==0){this.cmdhist("","All closed","green");this.$menuctrl.slideUp("fast")}},
cmdhist:function(win_id,str,col){if(!str)return;if(this.cmdhist_lastmsg==win_id+str)return;this.cmdhist_lastmsg=win_id+str;if(win_id!=this.cmdhist_lastid){this.$cmdhist_box.append('<p class="green bld">['+win_id+"]</p>");this.cmdhist_lastid=win_id}this.$cmdhist_box.append("<p></p>");this.$cmdhist_box.children("p:last").text(str).addClass(col);if(this.$cmdhist_box.children("p").length>100)this.$cmdhist_box.children("p:first").remove();this.$cmdhist_box.scrollTop(1E4)},mousepick:function(wn,str){var a=
str.replace(/^.*?\[(.+?)\](.+?):(.+?)\.(.+?) #(.*?) .+$/,"$1,$2,$3,$4,$5").split(",");this.$pick_id.text(wn.replace("jmol-",""));this.$pick_chain.text(a[2]);this.$pick_res.text(a[0]+"-"+a[1]);this.$pick_atom.text(a[3]+"-"+a[4]);var o=this.$pick_img;$.get(phpvar.idservadr+a[0],function(data){if(data=="")o.slideUp("fast");else o.html(data).slideDown("fast")})}};
function _entitem(type,data_id,movnum){var id=data_id.replace(/^.+-/,"");var db=data_id.substr(0,1).toLowerCase();return type=="mol"?phpvar.vwidx_bar.replace("__imgurl__",phpvar.imgurl.vw[db].replace("__id__",id)).replace("__str__",id):phpvar.movidx_bar.replace("__imgurl__",phpvar.imgurl.mov[db].replace("__id__",id).replace("__num__",movnum||(db=="e"?2:"dep"))).replace("__str__",id+(movnum?" #"+movnum:""))};
";s:13:"simple_common";s:4068:"jQuery.fn.extend({_loadex:function(opt){var $cont_box=$(this);var speed=opt.speed===undefined?"medium":opt.speed;var $body=$("html,body");_pop.hide();if($cont_box.offset().top<$body.scrollTop())$("html,body").stop(1,1).animate({scrollTop:$cont_box.offset().top},"slow");return $cont_box.slideUp(speed,function(){$cont_box.html(phpvar.loading).show().load(opt.u,opt.v,opt.func)})}});
var _localstr={get:function(name){return localStorage.getItem("yorodumi."+name)},getjson:function(name){return JSON.parse(this.get(name))},getbool:function(name){return this.get(name)==="1"},setjson:function(name,val){this.set(name,JSON.stringify(val))},setbool:function(name,val){this.set(name,val?1:0)},set:function(name,val){_timer.do_after_busy(function(){localStorage.setItem("yorodumi."+name,val)},500,"localstr_"+name)}};
var _tab={$p:$(".tabp"),refresh:function(){this.$p=$(".tabp")},s:function(id1,id2,js){var i=id1+"_"+id2;$(".tabbtn_"+id1).prop("disabled",false);$("#tabbtn_"+i).prop("disabled",true);$(".tabdiv_"+id1).hide();$("#tabdiv_"+i).show();_pop.hide();js&&eval(js);this.shrink()},shrink:function(){_timer.do_after_busy(function(){this.shrink_main()}.bind(this),100)},shrink_main:function(){this.$p.each(function(){var wid_cont,wid_pre,wid_tabs=0,wid_tabs_lim=0,maxwid,w,$btns,o_wrap,num_tabs,$tabp=$(this),mrgn_r=
2;if($tabp.is(":hidden"))return;wid_cont=$tabp.parent().width()-10;$btns=$tabp.children(".tabbtn");$btns.css({maxWidth:"none"});num_tabs=$btns.length;maxwid=Math.round(wid_cont/num_tabs)+10;$btns.each(function(){w=$(this).outerWidth()+4;wid_tabs+=w;wid_tabs_lim+=Math.min(maxwid,w)});wid_pre=$tabp.children(".tabstr").width();$wrap=$tabp.children(".wrap");0<wid_pre&&wid_cont<wid_tabs+wid_pre?$wrap.show():$wrap.hide();if(wid_cont<wid_tabs)wid_tabs=wid_tabs_lim;else maxwid="none";if(wid_cont<wid_tabs)mrgn_r=
Math.max(Math.round((wid_cont-wid_tabs)/num_tabs),-50);$btns.css({overflow:"hidden",maxWidth:maxwid,marginRight:mrgn_r})})}};
var _pop={$box:{1:$("#popbox"),2:$("#popbox2"),3:$("#popbox3")},$trig:{1:false,2:false,3:false},up:function(o,lev){var $trg=$(o);if(lev==undefined)if($trg.parents("#popbox2").length>0)return this.up(o,3);else if($trg.parents("#popbox").length>0)return this.up(o,2);else lev=1;this.hide(lev+1);this.$trig[lev]&&this.$trig[lev].removeClass("poptrg_act");this.$trig[lev]=$trg;if($trg.hasClass("poptrg_act"))this.hide(lev);else this.show(lev,$trg)},show:function(lev,$trg){var url=$trg.data("url");if(url)$.get(url,
function(d){var cont=($trg.data("pre")||"")+d;this.$box[lev].html(phpvar.popxbtn[lev]+cont);$trg.data("pop",cont).data("url","").data("pre","")}.bind(this));$trg.addClass("poptrg_act");this.$box[lev].fadeTo(0,0).html(phpvar.popxbtn[lev]+$trg.data("pop")).position({of:$trg,my:"left top",at:$trg.parent()[0].tagName=="LI"?"right top":"left bottom",collision:"flipfit"}).fadeTo("medium",0.95,function(){var js=$trg.data("js");js&&eval(js)})},hide:function(lev){for(var n=3;n>=(lev||1);n--){this.$trig[n]&&
this.$trig[n].removeClass("poptrg_act");this.$box[n].fadeTo("fast",0,function(){$(this).html("")})}}};function _more(eid,flg){_pop.hide();var $more=$("#more_"+eid),$moreb=$("#moreb_"+eid),$lessb=$("#lessb_"+eid);if(flg){$more.hide("fast");$moreb.show("fast");$lessb.hide("fast")}else{$more.show("fast");$moreb.hide("fast");$lessb.show("fast")}}function _long(eid,flg){_pop.hide();var $short=$("#short_"+eid),$long=$("#long_"+eid);if(flg){$long.hide();$short.show()}else{$long.show();$short.hide()}}
function _limany(eid,flg){_pop.hide();if(flg){$("#ulm_"+eid+" .more").show("fast");$("#less_"+eid).show("fast");$("#more_"+eid).hide("fast")}else{$("#ulm_"+eid+" .more").hide("fast");$("#less_"+eid).hide("fast");$("#more_"+eid).show("fast")}}
var _timer={timer:{},flg_busy:{},do_after_busy:function(func,msec,name){name=name||"temp";clearTimeout(this.timer[name]);this.timer[name]=setTimeout(function(){func()},msec||100)},busy:function(msec,name){name=name||"defo";if(this.flg_busy[name])return true;this.flg_busy[name]=true;setTimeout(function(){this.flg_busy[name]=false}.bind(this),msec||100)}};
";s:4:"stat";s:2983:"var colplot=1,currplot;$(function($){if(sortint)$("#maintable").tablesorter({headers:{0:{sorter:"digit"}},textExtraction:function(node){return node.innerHTML.replace(/[^0-9]/,"")}});else $("#maintable").tablesorter();$("#maintable").bind("sortEnd",function(){_sortend()});_fixhead()});function _sortend(){_fixhead();_hideplot()}var mainh=$("#maintable thead tr"),fixhshowing=0;
function _fixhead(){if(k2==null)return;var fh=$("#fixhead tr").html("");$("#fixhead").width($("#maintable").width());mainh.children("th").each(function(){var o=$(this);fh.append($("<th></th>").html(o.html()).width(o.width()).addClass(""+(o.hasClass("headerSortUp")?"headerSortUp":"")+(o.hasClass("headerSortDown")?"headerSortDown":"")).click(function(){o.click()}))})}
$(window).scroll(function(){var w=$(document).scrollTop(),h=mainh.position().top;if(fixhshowing&&h>w){$("#fixhead").stop(1,1).fadeOut(100);fixhshowing=0}else if(!fixhshowing&&h<w){$("#fixhead").stop(1,1).fadeTo(500,0.75);fixhshowing=1}}).resize(function(){clearTimeout(T.fixhead);T.fixead=setTimeout("_fixhead()",500)});
$(".dlnk,.pbar").click(function(){var o=$(this),s1=k1v[o.attr("k")],s2=k2v[o.attr("sk")],d=o.attr("d");if(s1==undefined|o==null)return;window.open(urlbase+ck1+"=1&kw=%22"+k1+":"+s1+"%22"+(s2==undefined?"":" %22"+k2+":"+s2+"%22&"+ck2+"=1")+(d==undefined?"":"&db="+d))});
if(k2!=null){var pb=$("#parambox");$("#maintable th, #maintable td").mouseover(function(){var o=$(this),r=o.attr("k"),c=o.attr("sk");if(r==undefined&c==undefined)return;if(r==undefined)colplot=1;if(c==undefined)colplot=0;clearTimeout(T.plot);clearTimeout(T.hideplot);T.plot=setTimeout("_plot("+r+","+c+")",200)});$("#maintable").mouseout(function(){clearTimeout(T.plot);clearTimeout(T.hideplot);T.hideplot=setTimeout("_hideplot();",1E3)})}
function _hideplot(f){$(".pbox").stop(1,1).fadeTo(500,0).animate({width:0,height:0},500,function(){if(!f)currplot=""})}
function _plot(r,c){var p=colplot?"c"+c:"r"+r;if(currplot==p)return;currplot=p;_hideplot(1);$(".pcell").removeClass("pcell");var o,v,num=1,dly=1;if(colplot){var w=$(window).width(),l=$("#r0c"+c).offset().left-$(window).scrollLeft(),psize=w/2/maxval,pmy="left",pat="right";if(l>w/2){pmy="right";pat="left"}while(1){o=$("#r"+num+"c"+c).addClass("pcell");if(!o[0])break;v=o.text();if(v>0){_plotsub(num,dly,{width:Math.round(v*psize),height:o.height()-5},{of:o,my:pmy,at:pat,collision:"none"});++dly}++num}}else{var w=
$(window).height(),t=$("#r"+r+"c1").offset().top-$(window).scrollTop(),psize=w/2/maxval,pmy="top",pat="bottom";if(t>w/2){pmy="bottom";pat="top"}while(1){o=$("#r"+r+"c"+num).addClass("pcell");if(!o[0])break;v=o.text();if(v>0){_plotsub(num,dly,{width:20,height:Math.round(v*psize)},{of:o,my:pmy,at:pat,collision:"none"});++dly}++num}}}function _plotsub(num,dly,ocss,opos){$("#pb"+num).stop(1,1).delay(dly*50).css(ocss).position(opos).fadeTo(0,0.7)}
function _showall(f){if(f){$("#showall").hide();$(".hrow").show()}else{$("#showall").show();$(".hrow").hide()}_fixhead()};
";s:5:"stat2";s:3071:"var $win=$(window),$maintable=$("#maintable");$(function(){if(phpvar.sortint)$maintable.tablesorter({headers:{0:{sorter:"digit"}},textExtraction:function(node){return node.innerHTML.replace(/[^0-9]/,"")}});else $maintable.tablesorter();$maintable.bind("sortEnd",function(){_fixhead.setc();_plot.hideall()});_fixhead.init();phpvar.k2&&_plot.init()});
$(".dlnk,.pbar").click(function(){var o=$(this),s1=phpvar.k1v[o.attr("k")],s2=phpvar.k2v[o.attr("sk")],d=o.attr("d");if(s1==undefined||o==null)return;window.open(phpvar.urlbase+phpvar.ck1+"=1&kw=%22"+phpvar.k1+":"+s1+"%22"+(s2==undefined?"":" %22"+phpvar.k2+":"+s2+"%22&"+phpvar.ck2+"=1")+(d==undefined?"":"&db="+d))});function _showall(f){if(f){$("#showall").hide();$(".hrow").show()}else{$("#showall").show();$(".hrow").hide()}_fixhead.setc()}
var _plot={flg_col:false,currplot:null,$pbox:$(".pbox"),init:function(){var that=this;$maintable.find("th, td").mouseover(function(){var o=$(this),r=parseInt(o.attr("k")),c=parseInt(o.attr("sk"));if(!r&&!c)return;if(!r)that.flg_col=true;if(!c)that.flg_col=false;_timer.do_after_busy(function(){that.start(r,c)},200,"plot")});$maintable.mouseout(function(){_timer.do_after_busy(function(){that.hideall(r,c)},500,"plot")})},start:function(r,c){var o,w,f,pmy,pat,psize,num=0,dly=1;var p=this.flg_col?"c"+
c:"r"+r;if(this.currplot==p)return;this.currplot=p;this.hideall(true);$(".pcell").removeClass("pcell");if(this.flg_col){w=$win.width()/2,f=w>this.cell(1,c).offset().left-$win.scrollLeft();pmy=f?"left":"right";pat=f?"right":"left";psize=w/phpvar.maxval}else{w=$win.height()/2,f=w>this.cell(r,1).offset().top-$win.scrollTop();pmy=f?"top":"bottom";pat=f?"bottom":"top";psize=w/phpvar.maxval}while(1){++num;o=this.flg_col?this.cell(num,c):this.cell(r,num);o.addClass("pcell");if(!o[0])break;v=o.text();if(!v)continue;
v=Math.round(v*psize);$("#pb"+num).stop(true,true).delay(dly*20).css(this.flg_col?{width:v,height:o.height()-5}:{width:20,height:v}).position({of:o,my:pmy,at:pat,collision:"none"}).fadeTo(0,0.7);++dly}},hideall:function(flg){this.$pbox.stop(1,1).fadeTo(500,0,function(){if(!flg){this.currplot=null;$(".pcell").removeClass("pcell")}}.bind(this))},cell:function(r,c){return $("#r"+parseInt(r)+"c"+parseInt(c))}};
var _fixhead={showing:false,$head_tr:$("#maintable thead tr"),$fixhead:$("#fixhead"),init:function(){this.setc();$win.scroll(function(){this.onscroll()}.bind(this)).resize(function(){this.setc()}.bind(this))},setc:function(){var o,fxhd;if(phpvar.k2==null)return;fxhd=this.$fixhead.width($maintable.width()).find("tr").html("");this.$head_tr.children("th").each(function(){o=$(this);fxhd.append($("<th></th>").html(o.html()).width(o.width()).addClass(""+(o.hasClass("headerSortUp")?"headerSortUp":"")+(o.hasClass("headerSortDown")?
"headerSortDown":"")).click(function(){o.click()}))})},onscroll:function(){var w=$(document).scrollTop(),h=this.$head_tr.position().top;if(this.showing&&h>w){this.$fixhead.stop(1,1).fadeOut(100);this.showing=false}else if(!this.showing&&h<w){this.setc();this.$fixhead.stop(1,1).fadeTo(500,0.75);this.showing=true}}};
";s:7:"tooltip";s:78:"$(function(){$("a, input, button, img, th, td, .icap").tooltip(ttip_param)});
";s:7:"vcommon";s:1546:"var dt=new Date;dt.setDate(dt.getDate()+365);var ckdate=dt.toGMTString();
$(function(){$("#open_sel").tabs({active:open_acttab});_idpopup();var i=$("#idbox"),ib=$("#idboxpop");i.keyup(function(){var v=i.val();if(v.length==3|v.length==4)$.get("ajax_id2imgv.php?id="+v,function(data){if(data=="")ib.slideUp("fast");else ib.html(data).slideDown("fast")});else ib.slideUp("fast")});var r=$(".rsel_opt");r.click(function(){_rsel_act(this)});r.change(function(){_rsel_act(this)});r.focus(function(){_rsel_act(this)});r.keyup(function(){_rsel_act(this)})});
function _rsel_act(t){$(".rsel_opt").addClass("transp");$(t).removeClass("transp")}function _randimg(m){if(m=="menu")m=$("#randmenu").val();var o=$("#randimg"),ol=$("#randimg_loading"),kw=m=="k"?"&kw="+$("#rndkw").val():"";o.slideUp("fast");ol.show("fast");$.get("ajax_randimg.php?mode="+m+kw+"&t="+Date(),function(data){o.html(data).slideDown("fast",function(){_idpopup();ol.stop(1,1).hide("fast")})})}function _randkw(o){$("#rndkw").val(o);_randimg("k")}
function _randimgdel(){_cookie("randimg","x");$("#randimg").hide("fast").html("")}function _idpopup(){$(".lnkimg").hover(function(){var t=$(this),tt=t.attr("title");if(tt.indexOf(":")==-1)$.get("ajax_gettitle.php?id="+tt,function(data){var ttt=tt+": "+data,o=$("#idpopup");t.attr("title",ttt);if(o.text()==tt)o.text(ttt)});$("#idpopup").stop(1,1).text(tt).fadeIn("fast").position({of:t,my:"top",at:"bottom"})},function(){$("#idpopup").fadeOut("medium")})}
function _cookie(k,v){document.cookie=k+"="+escape(v)+";"+"expires="+ckdate+";"};
";s:4:"view";s:27775:"var zmax=1E3,mdist=8,timer={},busy=0,hidden={},anifid=0,apmax={},lastselobj,U={},G={},prime=0<$("#ctrl_prime").length;G.col_cpk_nc=true;G.col_cpk_lig=true;var curzoom=100,zshade=60,selmodef=_jmol?{"halo":true,"center":true}:{"halo":true,"blink":true},loaded={},loadedmap,loadedef={},blinkcnt=0,pickselmode,cmodel=0,fileid=2,f_mcol,define="",slbthick=-1,slbcenter=-1,A={},selecting,cursurf="s1",tlsurf={},mscnt=0,cmdcnt=0;
$(function(){$("#aparea").resizable({minHeight:100,minWidth:100,maxWidth:$(window).width()-20,maxHeight:$(window).height()-20,distance:mdist,handles:"all",start:function(event,ui){ui.helper._ztop();$("#jvbox, #jmol").width(10).height(10)},stop:function(event,ui){var a=ui.helper;$("#jvbox, #jmol").width(a.width()).height(a.height()-25);rightp_width();a._takeb()._ckpos();_maxap(0);if(_jmol)Jmol.resizeApplet(jmolobj,[a.width(),a.height()-25])}}).draggable({handle:"#aptbar",containment:"document",distance:mdist,
start:function(event,ui){ui.helper._ztop()},stop:function(event,ui){ui.helper._takeb()._ckpos();rightp_width();_maxap(0);_pita();U.apdown=0}});$("#btn_area").draggable({containment:"document",distance:mdist,scroll:false,start:function(event,ui){ui.helper._fixs()._ztop()},stop:function(event,ui){ui.helper._abso()._takeb()._ckpos()}}).resizable({minHeight:30,minWidth:50,handles:"all",distance:mdist,start:function(event,ui){ui.helper._fixs()._ztop()},stop:function(event,ui){ui.helper._abso().css("height",
"auto")._ckpos()}});$(".ctrls").draggable({handle:".tbar",distance:mdist,start:function(event,ui){ui.helper._fixs()._ztop()},stop:function(event,ui){ui.helper._abso()._takeb()._ckpos()}}).resizable({minHeight:40,minWidth:150,handles:"all",distance:mdist,start:function(event,ui){ui.helper._fixs()._ztop().children(".ctrlin").css("height","auto")},stop:function(event,ui){ui.helper._abso()._ckpos().children(".ctrlin").height(ui.helper.height()-32)}});$(".btns").dblclick(function(){_rearg($(this).attr("id").slice(4))});
$("#btn_area:not(button)").dblclick(function(){for(var n in panels)_hidectrl(panels[n],1)});$("#title, #aparea, #btn_area, .ctrls").click(function(){$(this)._ztop()._takeb()});$(".tbar").dblclick(function(){$(this)._pshade()});$(".tbar img").click(function(){$(this).parent(".tbar")._pshade()});$("#aptbar").hover(function(){$("#apoptbtn").show()},function(){$("#apoptbtn").hide()}).dblclick(function(){_showapopt()});$("#apopt").hover(function(){clearTimeout(timer.hideapopt);_showapopt(1)},function(){timer.hideapopt=
setTimeout("_showapopt(0)",1E3)});$("#slabm_slider").slider({values:[0,100],range:true,slide:function(event,ui){if(_wait())return;_jmol_slab(ui.value)},stop:function(event,ui){_jmol_slab(ui.value)}});$("#slabv_slider").slider({slide:function(event,ui){jvs("slab "+(100-ui.value))}});$("#zoom_slider").slider({min:10,max:500,value:100,step:5,slide:function(event,ui){if(_jmol){if(_wait())return;var v=ui.value;jmols("zoom "+v);$("#zvbox").val(v)}else{var z=ui.value/curzoom*100;jvs("zoom "+z);curzoom=curzoom*
z/100}},stop:function(event,ui){if(!_jmol)return;var v=ui.value;jmols("zoom "+v);$("#zvbox").val(v)}});$("#tlatom_slider").slider({min:0,max:0.99,step:0.01,value:A.tlatom,slide:function(event,ui){if(_wait(200))return;_tlatom(ui.value)},stop:function(event,ui){_tlatom(ui.value)}});$("#tlsurf_slider").slider({min:0,max:0.99,step:0.01,value:A.tlsurf,slide:function(event,ui){if(_wait(200))return;_tlsurf(ui.value)},stop:function(event,ui){_tlsurf(ui.value)}});$(".selmark")._popup("#selmarkpop");$("#atom_surf").tabs();
$("#help_tabs").tabs();$.getJSON(ajaxfn,function(json){for(var n in json)$("#data_"+n).html(json[n]);if(_pdb)$(".seq").mouseup(function(){_selsel(this)});$(".ctrls")._shorten();_coolpanel(coolpanel);$("._pu")._popup();_idpopup();if(_chem)$("#compo_tabs").tabs({activate:function(event,ui){_chem_compo_tab(ui.newTab.text())}})}).error(function(jqXHR,textStatus,errorThrown){$("#data_ajaxdbg").html("<b>Error:</b> "+textStatus+"<br>"+"<b>Text:</b><br>"+jqXHR.responseText);_loaderror()});$(".desc").dblclick(function(){$(this).hide("fast")});
$("#msg").dblclick(function(){$(this).text("")});timer.loaderror=setTimeout("_loaderror()",2E4)});$(window).resize(function(){if(apmax.x!=undefined)_maxap(1);$(".ctrls")._shorten()});
jQuery.fn.extend({_popup:function(c){return this.each(function(){var t=$(this);var p=c==undefined?t.next().appendTo("body"):$(c);U.fnchpop="$( '.pubox' ).fadeOut( 'medium' )";t.hover(function(){t.css("opacity",0.6);clearTimeout(timer.popshow);clearTimeout(timer.pophide);timer.popshow=setTimeout(function(){$(".pubox").hide();var w=Math.floor($(window).width()/4);clearTimeout(timer.popshow);clearTimeout(timer.pophide);p.show().css({opacity:0.85,maxWidth:w})._ztop().position({of:t,my:"left top",at:"left bottom"})},
200,p)},function(){t.css("opacity",1);clearTimeout(timer.popshow);clearTimeout(timer.pophide);timer.pophide=setTimeout(U.fnchpop,200)}).click(function(){clearTimeout(timer.popshow);clearTimeout(timer.pophide);p.hide().fadeIn("fast").position({of:t,my:"left top",at:"left bottom"});setTimeout(function(){p._ztop()},100)});p.hover(function(){clearTimeout(timer.popshow);clearTimeout(timer.pophide);p.show().css("opacity",1)},function(){clearTimeout(timer.popshow);clearTimeout(timer.pophide);timer.pophide=
setTimeout(U.fnchpop,1E3);p.css("opacity",0.7)})})},_ztop:function(){zmax++;return this.css("z-index",zmax)},_fixs:function(){this.children(".tbar").children(".reargbtn").show("fast");this.children(".reargbtn").show("fast");return this.width(this.width()).height(this.height())},_abso:function(){if(this.css("position")=="fixed")return this;return this.css({top:this.offset().top-$(document).scrollTop(),left:this.offset().left-$(document).scrollLeft(),position:"fixed"})},_takeb:function(){return this.each(function(){var t=
$(this);if(t.css("top").charAt(0)=="-")t.animate({top:2},"fast")._ckpos();if(t.css("left").charAt(0)=="-")t.animate({left:2},"fast")._ckpos()})},_ckpos:function(opt){var cid=this.attr("id");if(opt=="defo")_cookie("v_"+cid,"");else{var str=hidden[cid]?"0":"1";str=opt=="shade"?"2":str;if(this.css("position")=="fixed"||cid=="aparea")str+=","+this.position().left+","+this.position().top+","+this.width()+","+this.height();_cookie("v_"+cid,str)}return this},_ckorder:function(){var c=this.attr("id").replace("ctrl_",
"")+"|";p_order=c+p_order.replace(c,"");_cookie("p_order",p_order);return this},_shorten:function(f){return this.each(function(){var c=$(this),clin=c.children(".ctrlin");if(c.height()>40||f){clin.css("height","auto");c.css("height","auto")}var siz=($(window).height()-100)*0.9;if(clin.height()>=siz){clin.height(siz);c.css("height","auto")}})},_pshade:function(){var cl=$(this).parent(".ctrls");if(cl.height()<40)cl.css("height","auto")._anif(this)._ckpos();else cl.animate({height:25},"fast")._ckpos("shade")},
_anif:function(s){var o=$(s);if(o.offset().left==0)return this;$(_anifid()).css({top:o.offset().top,left:o.offset().left,width:o.width(),height:o.height()}).show().animate({left:this.offset().left,top:this.offset().top,width:this.width(),height:this.height()},400).fadeOut("normal");return this},_hide:function(o){return this.each(function(){$(this).hide(o,function(){$(this).css("display","none")})})},_showblock:function(o){return this.each(function(){$(this).show(o,function(){$(this).css("display",
"block")})})},_showinline:function(o){return this.each(function(){$(this).show(o,function(){$(this).css("display","inline")})})}});function _chem_compo_tab(pdbid){var o=$("#comp_title_"+pdbid);if(o.html()!="")return;$.getJSON("view_ajax_chem.php?p="+pdbid+"&c="+id,function(json){o.html(json.title);$("#comp_btns_"+pdbid).html(json.btn)})}
function _showctrl(c,flg){var cl=$("#ctrl_"+c);if(c==U.lastact&&flg==undefined&&!hidden["ctrl_"+c]){_hidectrl(c);U.lastact="";return}U.lastact=c;hidden["ctrl_"+c]=0;if(cl.height()<40)cl.css("height","auto");if($(".ctrls").index(cl)!=0&&cl.css("position")!="fixed")cl.hide().insertBefore(".ctrls:first");cl.show("fast",function(){$(this)._takeb()._shorten()._anif("#btn_"+c)._ztop()._ckpos()._ckorder()});_bshow(c,1)}
function _hidectrl(c,f){if(f==undefined)$("#btn_"+c)._anif("#ctrl_"+c);hidden["ctrl_"+c]=1;$("#ctrl_"+c)._ckpos().hide("fast");_bshow(c)}
function _rearg(c,flg){var cs=c=="btn_area"?"#btn_area":"#ctrl_"+c;var cl=$(cs);var p=_anifid();$(p).css({width:cl.width(),height:cl.height(),top:cl.offset().top,left:cl.offset().left});cl.hide().css("position","relative").css({width:"auto",height:"auto",top:"auto",left:"auto"}).find(".reargbtn").hide();if(!flg){cl.show().queue(function(){$(p).show();$(this).dequeue()})._shorten()._anif(p).queue(function(){$(p).hide();$(this).dequeue()});_bshow(c,1)}else _bshow(c,0);cl._ckpos()}
function _bshow(n,f){f?$("#btn_"+n).addClass("c"+n).removeClass("d"+n):$("#btn_"+n).addClass("d"+n).removeClass("c"+n)}function sizeap(m,m2,fmax){var ap=$("#aparea");var x=ap.width();var y=ap.height()-30;if(m=="l"){if(y<1E3){x+=50;y+=50}}else if(m=="s"){if(y>100){y-=50;x-=50}}else{x=m;y=m2>10?m2:m}ap.width(x).height(y+25);$("#jvbox, #jmol").width(x).height(y);if(_jmol){Jmol.resizeApplet(jmolobj,[x,y]);$("#jmolmsg").width(x)}rightp_width();if(fmax!=1){_maxap(0);$("#aparea")._ckpos()}}
function _maxap(f){var ap=$("#aparea");if(f==0){apmax={};$("#bt_aprest").hide();ap.draggable("enable");return}var t=0;var l=0;var x=$(window).width()-20;var y=$(window).height()-55;var flg=0;if(f==1&&apmax.x!=undefined)flg=1;else if(apmax.x==undefined){apmax.x=ap.width();apmax.y=ap.height()-25;apmax.t=ap.position().top;apmax.l=ap.position().left;$("#bt_aprest").show();flg=1;ap.draggable("disable").css({opacity:1,filter:"Alpha(Opacity=100)"})}else{x=apmax.x;y=apmax.y;t=apmax.t;l=apmax.l;apmax={};$("#bt_aprest").hide()}ap.css({top:t,
left:l});sizeap(x,y,flg)}function rightp_width(){var a=$("#aparea");var w=a.position().left+a.width();$("#right_pane").animate({marginLeft:w+17},"fast",function(){$(".ctrls")._shorten()});$("#title").animate({width:w+10},"fast")}function layout_reset(){$("#aparea").css("top",$("#title").height()+7).css("left",0);sizeap(400);_rearg("btn_area");for(var n in panels)_rearg(panels[n],1);for(var n in init_show)_rearg(init_show[n]);p_order="";_cookie("p_order","")}
function _coolpanel(f){if(f){$("#title,#aparea,#btn_area,.ctrls").addClass("sd br4");$("#aptbar,.tbar").addClass("br2")}else{$("#title,#aparea,#btn_area,.ctrls").removeClass("sd br4");$("#aptbar,.tbar").removeClass("br2")}_cookie("coolpanel",f)}function _pita(f){var a=$("#aparea");var apos=a.position();var t=$("#title");var h=t.height()+6;if(Math.abs(h-apos.top)<20&&apos.left<50||f)a.animate({top:h,left:0},"fast",function(){$(this)._ckpos();rightp_width()})}
function showopt(f){var cl=$("#options");cl._ztop();_cookie("vshowopt",f);var cla=$("#aparea");var clt=$("#title");if(f){$("#bt_showop").hide();$("#bt_hideop").show();cl.slideDown("fast").queue(function(){var t=clt.height()+7;U.apdown=0;if(t>cla.position().top&&cla.position().left<200){cla.css("top",t);U.apdown=1}cla._ckpos();$(this).dequeue()})}else{var t=clt.height()+12;$("#bt_hideop").hide();$("#bt_showop").show();cl.hide("fast").queue(function(){var cla=$("#aparea");if(t>cla.position().top&&cla.position().left<
200||U.apdown==1)cla.css("top",clt.height()+7);cla._ckpos();$(this).dequeue()})}}function _showapopt(f){var a=$("#apopt").width($("#aptbar").width());if(f==undefined)a.toggle("fast");else f?a.show("fast"):a.hide("fast")}
function richmode(f){_cookie("vrich",f);rich=f;if(f){$(".rich").fadeIn("slow",function(){$(this).css("display","block").filter("tr").css("display","table-row")});$(".richil").fadeIn("slow",function(){$(this).css("display","inline")}).filter(".bhidden").each(function(i,el){_bshow($(el).attr("id").replace(/btn_/,""),1)})}else $(".rich, .richil").fadeOut("slow",function(){$(this).css("display","none")});$(".ctrls")._shorten();$("#btn_rich").text(rich?"-":"+")}
function _richtgl(f){if(f!=undefined&&rich==f)return;$("#cb_rich").prop("checked",!rich);richmode(!rich)}function _showdesc(f){vhidedesc=f;_cookie("vhidedesc",f);f?$(".desc")._hide("fast"):$(".desc")._showblock("fast")}function fsize(s){sz=["x-small","small","medium","large","x-large"];$("*").css("font-size",sz[s]);_cookie("vfsize",s);_pita()}function _anifid(){anifid=(anifid+1)%10;return"#anif"+anifid}function _menusel(o){eval($(o).children("option:selected").val())}
function _checkb(o){eval(o.checked?o.name:o.value)}function _radio(o){eval(o.value)}function _alert(s){$("#msg").append("<br />"+s)}function _debugstr(s){var cl=$("#debugstr");cl.html(s+"<br />"+cl.html())}function _wait(x){if(busy)return 1;busy=1;setTimeout("busy=0",x==undefined?100:x)}function aps(s1,s2){if(_jmol)jmols(s1);else jvs(s2==undefined?s1:s2)}
function jmols(s,f){s=s.replace(/_dq_/g,'"');_cmdhist("$ "+s);if(f!=undefined)_loadstart(f);try{Jmol.script(jmolobj,s)}catch(e){_cmdhist("Jmol is busy now","green")}}function jvs(s){s=s.replace(/_dq_/g,'"');_cmdhist("$ "+s);try{o_jv.executeCommand(s)}catch(e){_cmdhist("jV is busy now","green")}}function apcmd(){var c=$("#cmdbox");var cl=c.val();if(cl=="")return;if(/^js /.test(cl))eval(cl.slice(3));else aps(cl);c.select()}
function selmode(m,f){if(f==undefined){selmodef[m]=!selmodef[m];f=selmodef[m]}else selmodef[m]=f;$(".selmode_"+m).addClass("selmode_o"+(f?"n":"ff")).removeClass("selmode_o"+(f?"ff":"n"));if(_jmol){if(m=="halo")jmols(f?"selectionHalos ON;":"selectionHalos OFF;");if(m=="only")jmols(f?"set hideNotSelected ON;":"set hideNotSelected OFF; display all and !water;");if(m=="center")jmols(f?"zoomto 0.7 {selected} 0;":"zoomto 0.7 0;")}else{if(m=="blink")f?_blink():_blinkoff();if(m=="center")jvs(f?"center selected;":
"center */*;");if(m=="only")jvs(f?"select !selected; displayatom off; select !selected":"displayatom on; select !selected; displayatom on; select !selected")}}
function _select(s,obj){if(obj!=undefined&&obj==lastselobj&&!selmodef["add"]){_selbtn_r();if(_jmol)jmols("selectionHalos OFF; select all; label off;"+(selmodef["center"]?"zoomto 0.7 0;":""));else{jvs("select all;");_blinkoff()}$("#cursel").text("all");$(".sel").fadeOut("medium",function(){$(this).css("display","none")});$("#selmarkpop").fadeOut("medium");selecting=0;lastselobj="";return}lastselobj=obj;if(_jmol){if(selmodef["add"])s="("+s+") or selected";var t="select "+s;if(selmodef["halo"])t+="; selectionHalos ON;";
if(selmodef["center"])t+="; zoomto 0.7 {selected} 0; ";if(_chem&&G.pdbmodel==undefined)t="label off; "+t+";label;";jmols(t)}else{var t="";if(selmodef["blink"])_blinkoff();if(selmodef["add"])s="(("+s+") or selected)";t+="select "+s+"; ";if(selmodef["center"])t+="center selected; ";if(selmodef["only"])t+="select !selected; displayatom off; select !selected; displayatom on; ";jvs(t);if(selmodef["blink"])_blink()}if(!selmodef["add"])_selbtn_r();if(obj!=undefined)$(obj).children("span").addClass("csel");
$("#cursel").text(s);if(s=="all"){$(".sel").fadeOut("medium",function(){$(this).css("display","none")});selecting=0}else{$(".sel").fadeIn("medium",function(){$(this).css("display","inline")});selecting=1}}function _selbtn_r(){$(".csel").removeClass("csel");$(".cselx").removeClass("cselx");$(".seqsel").removeClass("seqsel");$(".seqselx").removeClass("seqselx");$(".picked").removeClass("picked")}
function _resetsel(){_selbtn_r();if(_jmol){selmode("halo",1);selmode("only",0);selmode("center",1);selmode("add",0);jmols("selectionHalos OFF; set hideNotSelected OFF; display all and !water; select all; label off;");_zshade()}else{_blinkoff();selmode("blink",1);selmode("only",0);selmode("center",0);selmode("add",0);_blinkoff();jvs("select all")}$("#cursel").text("all");$(".sel").fadeOut("medium",function(){$(this).css("display","none")});$("#selmarkpop").fadeOut("medium");selecting=0}
function _selsel(c){var s=" ";if("\u000b"==="v")s+=document.selection.createRange().text;else s+=("getSelection"in window?window:document).getSelection().toString();if(s==" ")return;if(!_jmol){_jv_unable("jv_conf_seqsel");return}var o=$(c);s=s.replace(/[^A-Z]/g,"");_select('within( "'+s+'", all)&'+o.attr("name"));o.addClass("seqsel")}
function _blink(f){clearTimeout(timer.blink);if(f){jvs("displayatom on");timer.blink=setTimeout("_blink(0)",700);++blinkcnt;if(blinkcnt>9)_blinkoff()}else{jvs("displayatom off");timer.blink=setTimeout("_blink(1)",300)}}function _blinkoff(){clearTimeout(timer.blink);jvs("displayatom on");blinkcnt=0}function _clicksel(mode){pickselmode=mode}
function resetview(){$("#zvbox").val(100);$("#zoom_slider").slider({min:10,max:500,value:100});if(_jmol){jmols("reset; boundbox off");_fixslab();$("#slabm_slider").slider({values:[0,100]});$("#scale input:first").prop("checked",true)}else{jvs("slab 100; reset");curzoom=100;$("#slabv_slider").slider("value",0)}}
function _jmol_slab(cv){var v=$("#slabm_slider").slider("option","values");if(slbthick>=0)if(cv!=v[1]){v[1]=v[0]+slbthick;if(v[1]>100)v[1]=100;$("#slabm_slider").slider("values",1,v[1])}else{v[0]=v[1]-slbthick;if(v[0]<0)v[0]=0;$("#slabm_slider").slider("values",0,v[0])}else if(slbcenter>=0)if(cv!=v[1]){v[1]=2*slbcenter-v[0];if(v[1]>100)v[1]=100;$("#slabm_slider").slider("values",1,v[1])}else{v[0]=2*slbcenter-v[1];if(v[0]<0)v[0]=0;$("#slabm_slider").slider("values",0,v[0])}var s=100-v[0];var d=100-
v[1];jmols("slab "+s+"; set zDepth "+d+" ; slab on;")}
function _fixslab(f1,f2){if(f1==undefined){$("#slabm_slider").slider({values:[0,100]});slbthick=-1;slbcenter=-1;$("#fixcenter,#fixthick").prop("checked",false);$("#slbthick,#slbcenter").text("");jmols("slab off;depth 0;set zshade on;slab "+zshade)}else if(f1)if(f2){var v=$("#slabm_slider").slider("option","values");slbthick=v[1]-v[0];$("#slbthick").text(" "+slbthick+"%");_fixslab(0,0);$("#fixcenter").prop("checked",false)}else{slbthick=-1;$("#slbthick").text("")}else if(f2){var v=$("#slabm_slider").slider("option",
"values");slbcenter=Math.round((v[1]+v[0])/2);$("#slbcenter").text(" "+slbcenter+"%");_fixslab(1,0);$("#fixthick").prop("checked",false)}else{slbcenter=-1;$("#slbcenter").text("")}}function bg_col(c){aps(lights[c<2?0:1]+";background "+bgcols[c]);$("#jmolbox").css("background-color",bgcolsc[c]);_cookie("bg_col",c)}function _stereo(c){aps("stereo "+c);_cookie("stereo",c!="off"?c:"");if(prime)_prime_stereo(c)}
function _prime_stereo(c){var b="_s",a="_m";if(c.indexOf("redcyan")==0){b="_m";a="_s"}$(".prime_img").each(function(){var o=$(this);o.attr("src",o.attr("src").replace(b,a))})}function _scale(s){s=s+" "+s/10+" "+"0";jmols("boundbox ticks x "+s+";boundbox ticks y "+s+";boundbox ticks z "+s)}function imgq(f){jmols(f?_vlq:_vhq);_cookie("vlq",f);f?$(".cb_imgq").prop("checked",false):$(".cb_imgq").prop("checked",true)}
function _zval(v){var v=v==undefined?$("#zvbox").val():v;$("#zvbox").val(v);if(v<5||1E4<v)return;var zs=$("#zoom_slider");if(v>zs.slider("option","max"))zs.slider({max:v});zs.slider("value",v);jmols("zoom "+v)}function _zshade(v){if(v==undefined)v=zshade;zshade=v;jmols(v==0?"set zshade off":"set zshade on; set zslab "+v)}function _tlatom(v){jmols("color translucent "+v);A.tlatom=v}function _tlsurf(v){jmols("isosurface "+cursurf+" translucent "+v);f_mcol=1;A.tlsurf=v}
function _mapcolor(c){var t=$("#tlsurf_slider").slider("value");jmols("isosurface "+cursurf+" translucent "+t+" ["+c+"]");f_mcol=1}function _surfst(s){jmols("isosurface "+cursurf+" "+s+" on")}function _chsurf(s){cursurf=s;if(s==undefined){$("#cursurf").hide("fast").text("");$("#cursurf_btn").hide("fast")}else{var str=s=="s1"?"EMDB-"+(_pdb?loadedmap:id):s.replace(/^ms/,"Surface #").replace(/^ef/,"eF-site chain-");$("#cursurf").hide("fast").text(str).show("fast");$("#cursurf_btn").show("fast")}}
function _makesurf(f){++mscnt;sid="ms"+mscnt;_chsurf(sid);jmols("isosurface "+sid+(_chem?"":" IGNORE {solvent"+($("#mksurf_iglig").prop("checked")?" or ligand":"")+"}")+" resolution 0 "+(f?"molecular":"solvent 0"),1);$("#surflist").append(surfbtn.replace(/_id_/g,mscnt))}function _showsurf(i,f){if(f==undefined){f=i;sid=cursurf}else{f?_chsurf(sid):"";sid="ms"+i}jmols("isosurface "+sid+" "+(f?"on":"off"))}
function _resetstyle(){if(!_pdb)return;aps(init_style);$("#ctrl_Style select").prop("selectedIndex",0);if(_jmol){$("#tlatom_slider").slider("value",0);$("#tlsurf_slider").slider("value",0);jmols("isosurface ms delete;");A.tlatom=0;A.tlsurf=0}}
function _stmode(f){if(f){$("#atomst").appendTo("#hide");$("#surfst").appendTo("#atom_surf");$("#btn_surf").addClass("atomsurf_on").prop("disabled",true);$("#btn_atom").removeClass("atomsurf_on").prop("disabled",false);atomsurf=2}else{$("#atomst").appendTo("#atom_surf");$("#surfst").appendTo("#hide");$("#btn_atom").addClass("atomsurf_on").prop("disabled",true);$("#btn_surf").removeClass("atomsurf_on").prop("disabled",false);atomsurf=1}$("#ctrl_Style")._shorten(1)}
function _color(col,flg){nc="color (! _carbon_etc) cpk;";lig="color (ligand) cpk;";if(col=="nc_cpk"){G.col_cpk_nc=flg;if(flg)aps(nc)}else if(col=="lig_cpk"){G.col_cpk_lig=flg;if(flg)aps(lig)}else aps("color "+col+";"+(G.col_cpk_nc?nc:"")+(G.col_cpk_lig?lig:""))}function _asb(c,limit,i,f){if(_jmol)jmols('load "" FILTER "'+(f?backbone_only:"")+"biomolecule "+limit+'";'+init_style,0);else{_jvload(f?u_asbb+i:u_asb+i);if(f)jvs("backbone 150")}_datareloaded();_asb_btn(c)}
function _asb_btn(c){$(".b_asb").removeClass("act");$(c).children("span").addClass("act")}function reloadstr(c,m1,m2,m3){if(_jmol){var s1,s2;var ld=fileid==2?'load ""':'load "'+url_pdb+'"';if(m1!=undefined){s1=" {"+m1+" "+m2+" "+m3+"} ";s2="unitcell {"+(m1>2?"1":"0")+" "+(m2>2?"1":"0")+" "+(m3>2?"1":"0")+"};";jmols(ld+s1+";"+init_style+s2,0)}else jmols(ld+";"+init_style,0);_datareloaded()}else _jvload(url_pdb);_asb_btn(c)}
function _openpdb(u,sel,obj){if(G.pdbmodel!=u)jmols('load "'+u+'";'+init_pstyle+init_style,0);G.pdbmodel=u;if(sel!=undefined)_select(sel,obj)}function _pdbappend(i,u){if(_jmol){_defineid(i);var rot=loadedmap==undefined?"":"select ~"+i+";rotateSelected MOLECULAR @rq;translateSelected @t;";jmols('load APPEND "'+u+'";model all;center all;'+define+rot+init_style,0)}else _jvload(u,1);$("#apnd_"+i).prop("disabled",true)}
function _jvload(u,f){if(!f)jvs("zap");var txt='[js] loadPDB("'+u+'")';_cmdhist("Loading file, "+u,"blue");o_jv.loadPDB(u,1);jvs("center */*;zoom 140;"+init_style)}
function _fitted(pid,urlpdb,bu,hide){var id2=pid+(bu?"bu":"");if(hide){jmols("hide hidden OR ~"+id2);$(".fit"+id2).prop("checked",false);return}$(".fit"+id2).prop("checked",true);if(loaded[id2]){jmols("display displayed OR ~"+id2);return}_defineid(id2);var f=bu?' filter "'+backbone_only+'biomolecule 1"':"";jmols('load APPEND "'+urlpdb+'"'+f+";"+define+"select ~"+id2+";"+tmatrix+"backbone only; backbone 300;color chain;model all;select all;",0);loaded[id2]=1;if(!f_mcol){jmols("isosurface s1 translucent 0.60 [xffffff]");
$("#tlsurf_slider").slider("value",0.6);A.tlsurf=0.6}_zshade();$(".sel"+pid).prop("disabled",false)}
function _fitmap(fid,r1,r2,r3,m){if(!_jmol){_jv_unable("jv_conf_loadmap");return}if(fid==undefined){jmols("isosurface s1 off");return}if(loadedmap==fid){jmols("isosurface s1 on");return}$(".cb_fit:not(#cb_"+fid+")").prop("checked",false);if(loadedmap!=undefined)jmols("rq=quaternion(r*-1);t=t*-1;select all;translateSelected @t;rotateSelected MOLECULAR @rq;");loadedmap=fid;_chsurf("s1");jmols(""+"r=[["+r1+"],["+r2+"],["+r3+"]];"+"rq=quaternion(r);t={"+m+"};"+"select all;rotateSelected MOLECULAR @rq;translateSelected @t;"+
'isosurface s1 file "'+u_em_med+"/"+fid+'/ym/o1.zip|o1.jvxl";'+"isosurface s1 translucent 0.60 [xffffff];"+"center all; boundbox (all); selectionHalos OFF;",1);_zshade()}function _loadans(fn,c){if(_jmol)jmols('load "'+fn+'";'+init_pstyle+init_style,0);else _jvload(fn);fileid=3;_asb_btn(c)}
function _model(n){if(_jmol)jmols("frame pause; model "+(n==undefined?"all":n));else if(n==undefined){jvs("select all; displayatom on");$("#cmodel").text("All")}else{jvs("select all; displayatom off; select */"+n+"; displayatom on; select all;");$("#cmodel").text("#"+n)}}function _nmodel(i,l,h){if(i){++cmodel;if(cmodel>h)cmodel=l}else{--cmodel;if(cmodel<l)cmodel=h}_model(cmodel)}function _defineid(i){define+="define ~"+i+" "+fileid+".1;";++fileid}
function _datareloaded(){$(".cb_fit").prop("checked",false);loadedmap=undefined;$(".b_apnd").prop("disabled",false);fileid=2;$(".cb_ef").prop("checked",false);loadedef={};$("#surflist").text("");_chsurf();mscnt=0}
function _mousepick(p1,p2,p3,p4,p5,p6,p7,p8){if(_jmol){var a=p2.replace(/^.*?\[(.+?)\](.+?):(.+?)\.(.+?) #(.*?) .+$/,"$1,$2,$3,$4,$5").split(",");var chain=a[2];var res=a[0];var resn=a[1];var atom=a[3]+"-"+a[4];var atom_id=a[0].replace(/^.+?\]\.(.+?) .+$/,"$1")}else{var model=p2;var chain=p3;var resn=p4;var res=p7.replace(/^\s+|\s+$/g,"");var atom=p8+"-"+p5;var atom_id=""}$("#p_chain").text(chain);$("#p_res").text(res+"-"+resn);$("#p_atom").text(atom+" / "+atom_id);_jmolmsgpop("[Clicked] chain: "+
chain+", residue: "+res+"-"+resn+", atom: "+atom+"/"+atom_id);if(pickselmode==2)_select("*:"+chain);if(pickselmode==1)_select(resn+" & *:"+chain);$(".picked").removeClass("picked");$("#ch_"+chain+",#np_"+res+",#np_"+res+"_"+chain+"_"+resn+",#atid_"+atom_id.replace("'","_")).addClass("picked").animate({marginRight:20,marginLeft:20},"fast").animate({marginRight:0,marginLeft:0},"fast")}
function _loadstart(f){if(f==1)A.busy_surf=true;else A.busy_str=true;clearTimeout(timer.loaderror);$(".loadingbar").html(loadingbar);$("#loading").show("fast");timer.loaderror=setTimeout("_loaderror()",2E4)}function _loaderror(){$(".loadingbar").html(loadingerror);timer.loaderror2=setTimeout("$('#loading').hide('slow')",5E3)}
function _jmolmsg(s1,s2,s3){if(!$.isFunction(Jmol.script)){_cmdhist("Jmol is busy now.","green");_jmolmsgpop("Jmol is busy now.");return}$("#loading").hide("slow");if(A.busy_surf)$("#calcsurf").show("slow");if(A.busy_str)$("#calcstr").show("slow");if(A.busy_surf&&/created/.test(s2)){$("#calcsurf").hide("slow");A.busy_surf=false}if(A.busy_str&&/ atoms selected/.test(s2)){$("#calcstr").hide("slow");A.busy_str=false}if(s2=="")return;_cmdhist(s2,/ERROR/.test(s2)?"red":"blue");if(/atoms selected/.test(s2)){var num=
s2.replace("atoms selected","");$("#numselatom").text(num);if(num=="0 "){$(".seqsel").addClass("seqselx").removeClass("seqsel");$(".csel").addClass("cselx").removeClass("csel")}}_jmolmsgpop(s2)}
function _jmolmsgpop(s){if(s=="zShade = true")return;if(s=="zshadePower = 1")return;if(/script .*(started|completed)/i.test(s))return;var o=$("#jmolmsg");if(o.children("p").length>2)o.children("p:first").remove();o.show()._ztop().append("<p>"+s+"</p>");clearTimeout(timer.hidemsg);timer.hidemsg=setTimeout('$("#jmolmsg").fadeOut("medium").html("");',3E3)}
function _cmdhist(str,col){var cl=col!=undefined?' class="'+col+'"':"";$("#cmdhist").append("<p"+cl+"></p>");$("#cmdhist p:last").text(str);if(cmdcnt>100)$("#cmdhist p:first").remove();else++cmdcnt;$("#cmdhist").scrollTop(1E4)}function _geteflist(o){$(o).hide("fast");$("#efloading").show("fast");$.get("view_eflist.php?id="+id,function(data){$(o).replaceWith(data).show("fast");$("#efloading").hide("fast")})}
function _efsite(c,f){sid="ef"+c;if(f==1){jmols("isosurface "+sid+" off");return}_chsurf(sid);if(loadedef[c]){jmols("isosurface "+sid+" on");return}_loadstart(1);jmols("isosurface "+sid+' COLOR RANGE -0.1 0.1 file "eftrans.php?id='+id+"-"+c+'" COLORSCHEME "rwb" translucent 0.2');loadedef[c]=1}function _edmap(o,u){_loadstart(1);jmols("isosurface edmap color [x008000] sigma "+$("#edmap_lev").val()+" within "+$("#edmap_dist").val()+' (selected) "'+u+'" mesh nofill;');_chsurf("edmap")}
function _emmap(o,u){_loadstart(1);jmols("isosurface edmap color [x008000] cutoff "+$("#emmap_lev").val()+" within "+$("#emmap_dist").val()+' (selected) "'+u+'" mesh nofill;');_chsurf("emmap")}function _jv_unable(s){if(A[s])return;A[s]=true;if(window.confirm(msg_jv_unable))location.replace("?app=jmol&id="+id)};
";s:7:"viewtop";s:288:"$(function(){if($("#randimg").text()=="")_randimg("")});function _show(name){if(name=="all")$(".panel:hidden").show("medium");else{$(".panel:not(#"+name+")").hide("medium");$("#"+name+":hidden").show("medium")}}function _galset(id){$("#gbox").load("viewtop.php?g="+id);_show("gallery")};
";s:7:"ysearch";s:2966:"$(function(){_form.init();_form.is_changed();_ystab.init();if(history&&history.pushState)$(window).on("popstate",function(e){_form.reloadform()})});function _emn_search(){$("#form1").attr("action","esearch.php").submit()}
var _ystab={page_num:[],init:function(){this.rkeywords=_form.get_rkeywords();this.get("page",0);this.get("hit",0)},clear:function(names){names.forEach(function(c){$("#tabdiv_res_"+c).text("")}.bind(this));return this},set:function(name){_form.$act_tab.val(name);_form.$page_num.val(this.page_num[name]||0);_form.changed()},change:function(){name=_form.$act_tab.val()||"emdb";_tab.s("res",name);if(!$("#tabdiv_res_"+name).text())this.get("page");_form.disp_row()},page:function(num,tab){_form.$page_num.val(num);
_form.$act_tab.val(tab);_form.changed()},disp_mode:function(){this.clear(["emdb","pdb","sas","chem"]);this.get("page")},get_all:function(sp){this.page_num={};_form.$page_num.val(0);$("#ent_info").hide("medium");$("#oc_div_result")._loadex({u:"?ajax=res",v:_form.$o.serialize(),speed:sp,func:function(){this.get("page")}.bind(this)});this.get("hit")},get:function(type,sp){$(type=="page"?"#tabdiv_res_"+_form.$act_tab.val():"#hit_item")._loadex({u:"?ajax="+type,v:_form.$o.serialize(),speed:sp||"fast"})}};
var _form={prev_val:{},$act_tab:null,$page_num:null,$o:$("#form1"),init:function(){this.$act_tab=$("#act_tab");this.$page_num=$("#pagen");this.$o.change(function(){this.changed()}.bind(this));this.$act_tab.val(this.$act_tab.val()||phpvar.actab);this.disp_row(0)},is_changed:function(key){if(!key){this.prev_val["rkeywords"]=this.get_rkeywords();this.prev_val["mode"]=this.get_mode();this.prev_val["tab"]=this.$act_tab.val();this.prev_val["form"]=this.$o.serialize();return}var result,next,prev;next=key==
"rkeywords"?this.get_rkeywords():key=="mode"?this.get_mode():key=="tab"?this.$act_tab.val():key=="page"?this.$page_num.val():key=="form"?this.$o.serialize():null;if(key=="page"){var tab=this.$act_tab.val();prev=_ystab.page_num[tab];_ystab.page_num[tab]=next}else{prev=this.prev_val[key];this.prev_val[key]=next}result=prev!=next;return result},get_rkeywords:function(){var r=$("#idbox").val()+"%%"+$("input[name='auth']").val();return r},get_mode:function(){return $("input[name='mode']:checked").val()},
changed:function(donot_pushhist){if(!this.is_changed("form"))return;if(!donot_pushhist)history.pushState(null,null,"?"+this.$o.serialize());if(this.is_changed("rkeywords")){_ystab.get_all();return}if(this.is_changed("mode"))_ystab.disp_mode();if(this.is_changed("tab"))_ystab.change();else if(this.is_changed("page"))_ystab.get("page")},disp_row:function(speed){var name=this.$act_tab.val()||"emdb";speed=speed==undefined?"medium":speed;$(".opt_tr").hide(speed);phpvar.opt_tr[name]&&phpvar.opt_tr[name].forEach(function(c){$("#tr_"+
c).stop(1,1).show(speed)})},reloadform:function(){var l=location.search||"?";this.$o._loadex({u:l+"&ajax=form",speed:0,func:function(){this.init();this.changed(true)}.bind(this)})}};
";}